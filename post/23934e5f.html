

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=light>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="firtree">
  <meta name="keywords" content="">
  
    <meta name="description" content="移动开发基础">
<meta property="og:type" content="article">
<meta property="og:title" content="【笔记】Android移动开发">
<meta property="og:url" content="http://example.com/post/23934e5f.html">
<meta property="og:site_name" content="firtree">
<meta property="og:description" content="移动开发基础">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/Greedy_firtree/picture/raw/master/blog/image-20230609154122149.png">
<meta property="og:image" content="https://gitee.com/Greedy_firtree/picture/raw/master/blog/image-20230610225824445.png">
<meta property="og:image" content="https://gitee.com/Greedy_firtree/picture/raw/master/blog/image-20230611101638476.png">
<meta property="og:image" content="https://gitee.com/Greedy_firtree/picture/raw/master/blog/A7F0D491E3D3CFC72EC24BEB7CBDE2EB.jpg">
<meta property="og:image" content="https://gitee.com/Greedy_firtree/picture/raw/master/blog/image-20230612190724983.png">
<meta property="og:image" content="https://gitee.com/Greedy_firtree/picture/raw/master/blog/image-20230613214145413.png">
<meta property="og:image" content="https://gitee.com/Greedy_firtree/picture/raw/master/blog/436C81EC83753E03FA2244FDCFA112A4.jpg">
<meta property="article:published_time" content="2023-06-09T03:29:59.000Z">
<meta property="article:modified_time" content="2023-06-15T04:43:49.811Z">
<meta property="article:author" content="firtree">
<meta property="article:tag" content="Android">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://gitee.com/Greedy_firtree/picture/raw/master/blog/image-20230609154122149.png">
  
  
  
  <title>【笔记】Android移动开发 - firtree</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Firtree</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>archive</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>category</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>tag</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>about</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/photos/044.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="【笔记】Android移动开发"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-06-09 11:29" pubdate>
          2023年6月9日 上午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          49k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          407 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">【笔记】Android移动开发</h1>
            
            
              <div class="markdown-body">
                
                <font size="3">
<meta name="referrer" content="no-referrer">
<h1 id="android基础">Android基础</h1>
<p>Google 以 Apache 开源许可证的授权方式，发布了 Android 的源代码</p>
<p>Android 四大组件分别为 activity、service、content provider、broadcast receiver</p>
<br>
<p><strong>Android 体系结构：</strong></p>
<p>Android 采用分层结构，从高到低分为 4 层</p>
<p>依次是应用程序层、应用程序框架层、核心类库和 Linux 内核层</p>
<br>
<ul>
<li>
<p>应用程序层：是一个核心应用程序的集合，所有安装在手机上的应用程序都属于这一层</p>
</li>
<li>
<p>应用程序框架层：主要提供了构建应用程序时用到的各种 API</p>
</li>
<li>
<p>核心类库：包含了系统库及 Android 运行时库</p>
</li>
<li>
<p>Linux 内核层：为 Android 设备的各种硬件提供了底层的驱动，如显示驱动、音频驱动等</p>
</li>
</ul>
<br>
<br>
<p><strong>Android 程序结构：</strong></p>
<p>（1）app 用于存放程序的代码和资源等内容。部分子目录的具体介绍如下：</p>
<ul>
<li>
<p>libs：用于存放第三方 jar 包</p>
</li>
<li>
<p>src / androidTest：该文件夹用于存放调试的代码文件</p>
</li>
<li>
<p>src / main / java：该文件夹用于存放程序的代码文件</p>
</li>
<li>
<p>src / lmain / res：该文件夹用于存放程序的资源文件</p>
</li>
<li>
<p>src / main / AndroidManifest.xml：它是整个程序的配置文件</p>
</li>
<li>
<p>app / build.gradle：该文件是 App 的 gradle 构建脚本。在该文件中有四个重要属性，分别是：compilveSdkVersion、buildToolsVersion、minSdkVersion、 targetSdkVersion。分别表示编译的SDK版本、编译的 Tools 版本、支持的最低SDK版本、支持的目标SDK版本（当前版本）</p>
</li>
</ul>
<p>（2）build.gradle：该文件是 Android 程序的 gradle 构建脚本</p>
<p>（3）local.properties：该文件用于指定 Android 程序中所使用的 SDK 路径</p>
<p>（4）settings.gradle：该文件用于配置在 Android 程序中使用到的子项目</p>
<br>
<br>
<p><strong>图片资源：</strong></p>
<p>根据屏幕密度不同，Android 会自动匹配不同文件中的图片资源</p>
<p>根据图片用途不同将图片分为 应用图标资源 和 界面中使用的图片资源</p>
<p>前者储存在以 mipmap 开头的文件夹中，后者储存在以 drawable 开头的文件夹中</p>
<br>
<p>（1）通过 java 代码调用图片资源</p>
<p><code>getResources().getDrawable(R.mipmap.ic_launcher) ;</code></p>
<p><code>getResources().getDrawable(R.drawable.icon) ;</code></p>
<br>
<p>（2）在 XML 布局中调用图片资源</p>
<p><code>@mipmap/ic_launcher</code></p>
<p><code>@drawable/icon</code></p>
<br>
<br>
<p><strong>主题和样式</strong></p>
<p>主题资源和 View 控件的具体样式都定义在 res / values 目录下的 styles.xml 文件中</p>
<p><img src="https://gitee.com/Greedy_firtree/picture/raw/master/blog/image-20230609154122149.png" srcset="/img/loading.gif" lazyload alt="image-20230609154122149"></p>
<p>（1）在 AndroidMainifest.xml 文件中设置主题</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">application</span>&gt;</span><br>	...<br>	android:theme = &quot;@style/AppTheme&quot;<br><span class="hljs-tag">&lt;/<span class="hljs-name">application</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>（2）在 java 代码中设置主题</p>
<p><code>setTheme(R.style&gt;AppTheme)</code></p>
<br>
<p>（3）通过 style 属性引用 textViewStyle 样式</p>
<p><code>&lt;TextView ... style=&quot;@style/textViewStyle&quot;/&gt;</code></p>
<br>
<br>
<p><strong>布局资源</strong></p>
<p>（1）通过 Java 代码调用布局资源文件</p>
<p>在 Activity 中，找到 onCreate() 方法，在该方法中来加载布局资源</p>
<p><code>setContentView(R.layout.activity_main) ;</code></p>
<br>
<p>（2）在 XML 布局文件中调用</p>
<p><code>&lt;include layout=&quot;@layout/activity_main&quot; /&gt;</code></p>
<br>
<br>
<p><strong>字符串资源</strong></p>
<p>在 res / values 目录下的strings.xml 文件中定义字符串</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span> = <span class="hljs-string">&quot;app_name&quot;</span>&gt;</span>字符串<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span><br></code></pre></td></tr></table></figure>
<br>
<p>（1）通过 java 代码调用</p>
<p>在 Activity 中，找到 onCreate() 方法，在该方法中来加载字符串资源</p>
<p><code>getResources().getString(R.string.app_main);</code></p>
<br>
<p>（2）在 XML 布局文件调用</p>
<p><code>@string/app_main</code></p>
<br>
<br>
<p><strong>颜色资源</strong></p>
<p>颜色资源通常定义在 res / values / colors.xml 文件中</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">color</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;colorPrimary&quot;</span>&gt;</span>#fff<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span><br></code></pre></td></tr></table></figure>
<br>
<p>（1）通过 java 代码调用</p>
<p>在 Activity 中，找到 onCreate() 方法，在该方法中来加载名称为 colorPrimary 的颜色资源</p>
<p><code>getResources().getColor(R.color.colorPrimary);</code></p>
<br>
<p>（2）在 XML 布局文件调用</p>
<p><code>@color/colorPrimary </code></p>
<br>
<br>
<p><strong>尺寸资源</strong></p>
<p>需要手动创建 res / values / dimens.xml 文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">dimen</span> <span class="hljs-attr">nema</span>=<span class="hljs-string">&quot;activity_horizontal_margin&quot;</span>&gt;</span>16dp<span class="hljs-tag">&lt;/<span class="hljs-name">dimen</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span><br></code></pre></td></tr></table></figure>
<br>
<p>（1）通过 java 代码调用</p>
<p>在 Activity 中，找到 onCreate() 方法，在该方法中来加载名称为 activity_horizontal_margin 的颜色资源</p>
<p><code>getResources().getDimension(R.dimen.activity_horizontal_margin );</code></p>
<br>
<p>（2）在 XML 布局文件调用</p>
<p><code>@dimen/activity_horizontal_margin </code></p>
<p><br><br><br>
<strong>程序调试</strong></p>
<p>（1）单元测试</p>
<p>包括两种：</p>
<p>Android单元测试类：ExampleInstrumentedTest类</p>
<p>Junit单元测试类：ExampleUnitTest类</p>
<br>
<p>（2）Logcat 的使用</p>
<p>是 Android 中的命令行工具，用于获取系统从启动到关闭的日志信息</p>
<p>Android 使用 android.util.Log 类的静态方法实现输出程序的调试信息，LogCat 区域中日志信息根据日志级别的不同显示不同的颜色</p>
<p>Log 类所输出的日志内容分为六个级别</p>
<p><img src="https://gitee.com/Greedy_firtree/picture/raw/master/blog/image-20230610225824445.png" srcset="/img/loading.gif" lazyload alt="image-20230610225824445"></p>
<h1 id="常见界面布局">常见界面布局</h1>
<p>Android 界面由布局和控件组成。</p>
<br>
<p><strong>View控件：</strong></p>
<p>所有的 UI 元素都是通过 View 控件与 ViewGroup 容器构建的。</p>
<ul>
<li>Android 应用程序的每个界面必须有且只有一个 ViewGroup 容器</li>
</ul>
<br>
<br>
<h2 id="界面布局编写方式">界面布局编写方式</h2>
<p>（1）在 XML 布局文件中编写布局，通常放在 res / layout 文件夹中，可以使结构更加清晰。</p>
<p>（2）在 Java 代码中编写布局，先通过 new 关键字创建，将创建的 View 控件添加到 nViewGroup 容器中，从而实现在布局界面中显示 View 控件。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">RelativeLayout</span> <span class="hljs-variable">relativeLayout</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RelativeLayout</span>(<span class="hljs-built_in">this</span>);<br>    RelativeLayout.<span class="hljs-type">LayoutParams</span> <span class="hljs-variable">params</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RelativeLayout</span>.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,RelativeLayout.LayoutParams.WRAP_CONTENT);<br><br>    <span class="hljs-comment">// addRule 参数对应 RelativeLayout 的 XML 布局属性</span><br>    params.addRule(RelativeLayout.CENTER_IN_PARENT);<br>	<span class="hljs-type">TextView</span> <span class="hljs-variable">textView</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextView</span>(<span class="hljs-built_in">this</span>);     <span class="hljs-comment">// 创建 TextView 控件</span><br>	textView.setText(<span class="hljs-string">&quot;Java 代码实现界面布局&quot;</span>);	   <span class="hljs-comment">// 设置空间的文字内容</span><br>	textView.setTextColor(Color.RED);           <span class="hljs-comment">// 设置控件的文字颜色</span><br><br>	<span class="hljs-comment">// 添加 TextView 对象和 TextView 的布局属性</span><br>	relativeLayout.addView(textView, params);<br>	setContentView((relativeLayout));<br></code></pre></td></tr></table></figure>
<br>
<br>
<h2 id="界面布局的通用属性">界面布局的通用属性</h2>
<p>5 种常用布局：线性布局、相对布局、表格布局、帧布局、约束布局</p>
<p>这些常用布局都必须指定 <code>android:layout_width</code> 和 <code>android:layout_heugh</code>，其他随意</p>
<br>
<p>布局的通用属性</p>
<table>
<thead>
<tr>
<th>属性名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>android:id</td>
<td>设置当前布局的唯一标识</td>
</tr>
<tr>
<td>android:layout_width</td>
<td>设置布局的宽度</td>
</tr>
<tr>
<td>android:layout_heigh</td>
<td>设置布局的高度</td>
</tr>
<tr>
<td>android:background</td>
<td>设置布局的背景</td>
</tr>
<tr>
<td>android:layout_margin</td>
<td>设置当前布局与屏幕边界、周围布局或控件的距离</td>
</tr>
<tr>
<td>android:padding</td>
<td>设置当前布局与该布局中控件的距离</td>
</tr>
</tbody>
</table>
<br>
<p><strong>（1）android:id</strong></p>
<p>在 XML 布局文件中它的属性值是通过&quot;@+id / 属性名称&quot; 定义的</p>
<p>为布局指定 android:id 属性后，在 R.java 文件中会自动生成对应的 int 值</p>
<p>在 Java 代码中通过 findViewByld() 方法传入该 int 值来获取该布局对象</p>
<br>
<br>
<p><strong>（2）android:layout_width / android:layout_heigh</strong></p>
<p>可以是具体的尺寸也可以是系统定义的值</p>
<ul>
<li>fill_parent：表示该容器的宽度与父容器的宽度（高度）相同</li>
<li>match_parent：同上</li>
<li>warp_content：表示该布局的宽度恰好能包裹它的内容</li>
</ul>
<br>
<br>
<p><strong>（3）android:background</strong></p>
<p>可以引用图片资源，也可以引用颜色资源</p>
<br>
<br>
<p><strong>（4）android:margin / android:padding</strong></p>
<p>值为具体的尺寸如 45dp</p>
<p>相似的还有：</p>
<p>android:layout_marginTop、android:layout_marginBottom、android:layout_marginLeft、android:layout_marginRight</p>
<p>android:paddingTop、android:paddingBottom、android:paddingLeft、android:paddingRight</p>
<br>
<h2 id="线性布局-linearlayout">线性布局 LinearLayout</h2>
<p>线性布局的子控件通常被指定为水平或者竖直排列</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="hljs-tag">	<span class="hljs-attr">属性</span> = <span class="hljs-string">&quot;属性值&quot;</span></span><br><span class="hljs-tag">	<span class="hljs-attr">...</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span><br></code></pre></td></tr></table></figure>
<br>
<table>
<thead>
<tr>
<th>属性名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>android:orientation</td>
<td>设置布局内控件的排列顺序</td>
</tr>
<tr>
<td>android:weight</td>
<td>在布局内设置控件权重，属性值可直接写 int 值</td>
</tr>
<tr>
<td>gravity=“center”</td>
<td>表示布局内控件居中显示</td>
</tr>
</tbody>
</table>
<p><strong>android:orientation</strong></p>
<ul>
<li>vertical：表示 LinearLayout 内控件从上到下依次竖直排列</li>
<li>horizontal：表示 LinearLayout 内控件从左到右依次水平排列</li>
</ul>
<br>
<p><strong>android:weight</strong></p>
<p>通过具体的数值来设置显示比，在进行屏幕适配时起到关键作用</p>
<p>控件的 android:layout_width 属性一般要设置为 0dp 才会有权重占比的效果，并且</p>
<p>LnearLayout 中的 android:layout_width 需设置为 match_parent</p>
<br>
<h2 id="相对布局-relativelayout">相对布局 RelativeLayout</h2>
<p>相对布局通过相对定位的方式指定子控件的位置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">RelativeLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">&quot;http://schemas.android.com/akp/res/android&quot;</span></span><br><span class="hljs-tag">	<span class="hljs-attr">属性</span> = <span class="hljs-string">属性值</span></span><br><span class="hljs-tag">	<span class="hljs-attr">...</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">RelativeLayout</span>&gt;</span><br></code></pre></td></tr></table></figure>
<br>
<table>
<thead>
<tr>
<th>属性名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>android:layout_centerInParent</td>
<td>设置当前控件位于父布局的中央位置</td>
</tr>
<tr>
<td>android:layout_centerVertical</td>
<td>设置当前控件位于父布局的垂直居中位置</td>
</tr>
<tr>
<td>android:layout_centerHorizontal</td>
<td>设置当前控件位于父控件的水平居中位置</td>
</tr>
<tr>
<td>android:layout_above</td>
<td>设置当前控件位于某控件上方</td>
</tr>
<tr>
<td>android:layout_below</td>
<td>设置当前控件位于某控件下方</td>
</tr>
<tr>
<td>android:layout_toLeftOf</td>
<td>设置当前控件位于某控件左侧</td>
</tr>
<tr>
<td>android:layout_toRightOf</td>
<td>设置当前控件位于某控件右侧</td>
</tr>
<tr>
<td>android:layout_alignParentTop</td>
<td>设置当前控件是否与父控件顶端对齐</td>
</tr>
<tr>
<td>android:layout_alignParentLeft</td>
<td>设置当前控件是否与父控件左对齐</td>
</tr>
<tr>
<td>android:layout_alignParentRight</td>
<td>设置当前控件是否与父控件右对齐</td>
</tr>
<tr>
<td>android:layout_alignParentBottom</td>
<td>设置当前控件是否与父控件底端对齐</td>
</tr>
<tr>
<td>android:layout_alignTop</td>
<td>设置当前控件的上边界与某控件的上边界对齐</td>
</tr>
<tr>
<td>android:layout_alignBottom</td>
<td>设置当前控件的下边界与某控件的下边界对齐</td>
</tr>
<tr>
<td>android:layout_alignLeft</td>
<td>设置当前控件的下边界与某控件的左边界对齐</td>
</tr>
<tr>
<td>android:layout_alignRight</td>
<td>设置当前控件的下边界与某控件的右边界对齐</td>
</tr>
</tbody>
</table>
<p><strong>举个栗子：</strong></p>
<p><img src="https://gitee.com/Greedy_firtree/picture/raw/master/blog/image-20230611101638476.png" srcset="/img/loading.gif" lazyload alt="image-20230611101638476"></p>
<br>
<h2 id="表格布局-tablelayout">表格布局 TableLayout</h2>
<p>采用行、列的形式来管理控件。不需要明确声明其中的行列数，而是通过在表格中添加 TableRow 来控制</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">TableLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="hljs-tag">	<span class="hljs-attr">属性</span> = <span class="hljs-string">属性值</span></span><br><span class="hljs-tag">	&lt;<span class="hljs-attr">TableRow</span>&gt;</span><br>		UI 控件<br>	<span class="hljs-tag">&lt;<span class="hljs-name">TableRow</span>&gt;</span><br>	UI 控件<br>	...<br><span class="hljs-tag">&lt;/<span class="hljs-name">TableLayout</span>&gt;</span><br></code></pre></td></tr></table></figure>
<br>
<p>TableLayout 继承自 LinearLayout，因此完全支持 LinearLayout 所支持的属性，额外的还有</p>
<table>
<thead>
<tr>
<th>属性名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>android:stretchColumns</td>
<td>设置可拉伸的列。android:stretchColumns=“0” 表示第1列可拉伸</td>
</tr>
<tr>
<td>android:shrinkColumns</td>
<td>设置可收缩的列。android:shrinkColumns=“1, 2” 表示第2列、第3列可收缩</td>
</tr>
<tr>
<td>android:collapseColumns</td>
<td>设置可隐藏的列。android:collapseColumns=“0” 表示第1列可隐藏</td>
</tr>
</tbody>
</table>
<p><strong>TableLayout 中的控件常用属性：</strong></p>
<table>
<thead>
<tr>
<th>属性名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>android:layout_column</td>
<td>设置该控件显示的位置。android:layout_column=“1” 表示在第2个位置显示</td>
</tr>
<tr>
<td>android:layout_span</td>
<td>设置该控件占据几列，默认为1列</td>
</tr>
</tbody>
</table>
<p>需要注意的是，在 TableLayout 中，列的宽度由该列中最宽的那个单元格（控件）决定</p>
<p>整个 TableLayout 的宽度则取决于父容器的宽度</p>
<br>
<h2 id="帧布局-framelayout">帧布局 FrameLayout</h2>
<p>帧布局用于在屏幕上创建一块空白区域， 添加到该区域中的每个子控件占一帧，这些帧会一个一 个叠加在一起，后加人的控件会叠加在上一个控件上层。默认情况下，帧布局中的所有控件会与布局的左上角对齐</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">FrameLayout</span> <span class="hljs-attr">xmlns</span> <span class="hljs-attr">android</span>=<span class="hljs-string">&quot;http://schemas android.com/apk/res/android&quot;</span></span><br><span class="hljs-tag">	<span class="hljs-attr">属性</span> = <span class="hljs-string">&quot;属性值&quot;</span></span><br><span class="hljs-tag">&lt;/<span class="hljs-attr">FrameLayout</span>&gt;</span><br></code></pre></td></tr></table></figure>
<br>
<table>
<thead>
<tr>
<th>属性名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>android:foreground</td>
<td>设置FrameLayout容器的前景图像（始终在所有子控件之上）</td>
</tr>
<tr>
<td>andorid:foregroundGravity</td>
<td>设置前景图像显示的位置</td>
</tr>
</tbody>
</table>
<br>
<h1 id="android常见界面控件">Android常见界面控件</h1>
<h2 id="textview">TextView</h2>
<p>用于显示文本信息</p>
<table>
<thead>
<tr>
<th>属性名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>android:layout_width</td>
<td>设置 TextView 控件的宽度</td>
</tr>
<tr>
<td>android:layout_height</td>
<td>设置 TextView 控件的高度</td>
</tr>
<tr>
<td>android:id</td>
<td>设置 TextView 控件的唯一标识</td>
</tr>
<tr>
<td>android:background</td>
<td>设置 TextView 控件的背景</td>
</tr>
<tr>
<td>android:layout_margin</td>
<td>设置当前控件与屏幕边界或周围控件、布局的距离</td>
</tr>
<tr>
<td>android:padding</td>
<td>设置 TextView 控件与该控件中内容的距离</td>
</tr>
<tr>
<td>android:text</td>
<td>设置文本内容</td>
</tr>
<tr>
<td>android:textColor</td>
<td>没置文本中文字显示的颜色</td>
</tr>
<tr>
<td>android:textSize</td>
<td>设置文本中文字大小，推荐单位为sp</td>
</tr>
<tr>
<td>android:gravity</td>
<td>设置文本内容的位置，如设置成&quot;center”， 文本将居中显示</td>
</tr>
<tr>
<td>android:maxLength</td>
<td>设置文本最大长度，超出此长度的文本不显示</td>
</tr>
<tr>
<td>android:lines</td>
<td>设置文本的行数，超出此行数的文本不显示</td>
</tr>
<tr>
<td>android:maxLines</td>
<td>设置文本的最大行数，超出此行数的文本不显示</td>
</tr>
<tr>
<td>android:ellipsize</td>
<td>设置当文本超出 TextView 控件规定的范围时的显示方式。属性值可选为” start&quot;、“middle”、“end&quot; ，分别表示在文本开始、中间或者末尾显示省略号</td>
</tr>
<tr>
<td>android:drawableTop</td>
<td>在文本的顶部显示图像，该图像资源可以放在 res/drawable 文件夹中相应分辨率的目录下，通过“@drawable/文件名” 调用。类似的属性有android:drawableBottom、android:drawableLeft、android:drawableRight</td>
</tr>
<tr>
<td>android:lineSpacingExtra</td>
<td>设置文本的行间距</td>
</tr>
<tr>
<td>android:textStyle</td>
<td>设置文本样式：bold (粗体)、talic (斜体)、normal (正常)</td>
</tr>
</tbody>
</table>
<br>
<h2 id="edittext">EditText</h2>
<p>EdiTert 控件表示编辑框，它是 TextView 控件的子类，用户可在此控件中输人信息</p>
<p>除了支持 TextView 控件的属性，还支持些其他的常用属性：</p>
<table>
<thead>
<tr>
<th>属性名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>android:hint</td>
<td>控件中内容为空时显示的提示文本信息</td>
</tr>
<tr>
<td>android:textColorHint</td>
<td>控件中内容为空时显示的提示文本信息的颜色</td>
</tr>
<tr>
<td>android:password</td>
<td>输入文本框中的内容显示为“.”</td>
</tr>
<tr>
<td>android:phoneNumber</td>
<td>设置输入文本框中的内容只能是数字</td>
</tr>
<tr>
<td>android:minLines</td>
<td>设置文本的最小行数</td>
</tr>
<tr>
<td>android:scrollHorizontally</td>
<td>设置文本信息超出 EditText 控件的宽度情况下是否出现横拉条</td>
</tr>
<tr>
<td>android:editable</td>
<td>设置是否可编辑</td>
</tr>
</tbody>
</table>
<br>
<h2 id="button">Button</h2>
<p>继承自 TextView 控件，既可以显示文本又可以显示图片（还是建议使用ImageView）</p>
<p>同时可以通过点击来执行操作，为 Button 控件设置点击事件的方式有三种</p>
<p>（1）在布局文件中指定 onClick 属性的值</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span></span><br><span class="hljs-tag">	<span class="hljs-attr">...</span></span><br><span class="hljs-tag">	<span class="hljs-attr">android:onClick</span>=<span class="hljs-string">&quot;click&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure>
<p>然后就可以在 Activity 中定义专门的方法来实现点击事件，方法名必须与 onLClick 属性的值保持一致</p>
<br>
<p>（2）使用匿名内部类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">btn.setOnClickListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">View</span>.OnClickListener() &#123;<br>	<span class="hljs-meta">@override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onClick</span><span class="hljs-params">(View view)</span> &#123;<br>		<span class="hljs-comment">// 实现点击事件的代码</span><br>	&#125;<br>&#125;);<br></code></pre></td></tr></table></figure>
<br>
<p>（3）使用 Activity 实现 OnClickListener 接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Activity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">View</span>.OnClickListener &#123;<br>	<span class="hljs-meta">@override</span><br>	<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle saveInstanceState)</span> &#123;<br>		...<br>		btn.setOnClickListener(<span class="hljs-built_in">this</span>);<br>	&#125;<br>	<span class="hljs-meta">@override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">OnClick</span><span class="hljs-params">(View view)</span> &#123;<br>		<span class="hljs-comment">// 实现点击事件的代码</span><br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<h2 id="imageview">ImageView</h2>
<p>继承自 View 控件，可以加载各种图片资源</p>
<table>
<thead>
<tr>
<th>属性名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>android:layout_width</td>
<td>设置ImageView控件的宽度</td>
</tr>
<tr>
<td>android:layout_height</td>
<td>设置ImageView控件的高度</td>
</tr>
<tr>
<td>android:id</td>
<td>设置ImageView控件的唯一标识</td>
</tr>
<tr>
<td>android:background</td>
<td>设置ImageView控件的背景</td>
</tr>
<tr>
<td>android:layout_ margin</td>
<td>设置当前控件与屏幕边界或周围控件的距离</td>
</tr>
<tr>
<td>android:src</td>
<td>设置ImageView控件需要显示的图片资源</td>
</tr>
<tr>
<td>android:scaleType</td>
<td>将图片资源缩放或移动，以适应ImageView控件的宽高</td>
</tr>
<tr>
<td>android:tint</td>
<td>将图片渲染成指定的颜色</td>
</tr>
</tbody>
</table>
<p>值得注意的是</p>
<p>通过 android:background 属性和 android:src 属性为 ImageView 控件设置图片的方式相同，都是以 “@drawable / 图片名称” 的方式进行设置的</p>
<p>区别在于 android:background 属性设置的是背景，会根据 ImageView 控件的大小进于伸缩</p>
<p>而 android:src 属性设置的是前景，以原图大小显示</p>
<br>
<h2 id="radiobutton">RadioButton</h2>
<p>RadioButton 控件表示单选按钮，它是 Button 控件的子类，默认为未选中状态</p>
<p>每一个单选按钮都有 “选中” 和 “末选中” 两种状态，这两种状态是通过 android:checked 属性指定的。当可选值为 true 时，表示选中状态，否则表示未选中状态</p>
<p>在 Android 程序中 RadioButton 控件经常与 RadioGroup 配合使用，实现单选按钮的功能</p>
<p>RadioGroup 是单选组合框，可容纳多个 RadioButon 控件，但是在 RadioGroup 中不会出现多个RadioBtton 同时选中情况</p>
<p>RadioGroup 继承自 LinearLayout，可以使用 android:orientation属性设置布局内控件的排列顺序</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">RadioGroup</span></span><br><span class="hljs-tag">	<span class="hljs-attr">android:属性名称</span> = <span class="hljs-string">&quot;属性值&quot;</span></span><br><span class="hljs-tag">	<span class="hljs-attr">...</span> &gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">RadioButton</span></span><br><span class="hljs-tag">		<span class="hljs-attr">android:属性名称</span> = <span class="hljs-string">&quot;属性值&quot;</span></span><br><span class="hljs-tag">		<span class="hljs-attr">...</span> &gt;</span><br>	...<br><span class="hljs-tag">&lt;<span class="hljs-name">RadioGroup</span> /&gt;</span><br></code></pre></td></tr></table></figure>
<br>
<h2 id="checkbox">CheckBox</h2>
<p>CheckBox 控件表示复选框，它是 Button 控件的子类，用于实现多选功能</p>
<p>每一个复选框都有“选中”和“未选中”两种状态，这两种状态是通过 android:checked 属性指定的，当该属性的值为true时，表示选中状态，否则，表示未选中状态</p>
<br>
<h2 id="toast">Toast</h2>
<p>Thast 类是 Android 提供的轻量级信息提配机制，用于向用户提示即时消息，它显示在应用程序界面的最上层显示一段时间后自动消失，不会打断当前操作，也不获得焦点</p>
<p>使用 Toast 类显示提示信息：</p>
<p><code>Toast.makeText (Context, Text, Time).show();</code></p>
<p>上述代码首先通过调用 Toast 类的 makeText 方法设置提示信息，然后调用 show0 方法将提示信息显示到界面中</p>
<p>makeText() 方法中的参数：</p>
<ul>
<li>Context：表示应用程序环境的信息，即当前组件的上下文环境。Context 是一个抽象类，如果在 Activity 中使用 Toast 类的提示信息，那么该参数可设置为 “当前Activity.this&quot;</li>
<li>Text：表示提示的字符串信息</li>
<li>Time：表示显示信息的时长，其属性值包括 Toast.LENGTH_SHORT 和 Toast.LENGTH_LONG，分别表示显示较短时间和较长时间</li>
</ul>
<p>默认情况下，Toast 类的消息会显示在屏幕的下方，它通常适用于信息提醒</p>
<p>比如提示网络未连接、用户名密码输人错误或者退出应用程序等</p>
<br>
<p><strong>想要消除导航栏：</strong></p>
<p>在D:\app\src\main\AndroidManifest.xml 中修改 theme 的属性</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">android:theme=&quot;@style/Theme.AppCompat.NoActionBar&quot;<br></code></pre></td></tr></table></figure>
<br>
<h2 id="列表控件">列表控件</h2>
<p>在一个页面中显示多个条目，并且每个条目之间的布局风格一致</p>
<h3 id="listview-的使用">ListView 的使用</h3>
<p>以列表的形式显示内容，并且能够根据列表的高度自适应屏幕显示</p>
<table>
<thead>
<tr>
<th>属性名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>android:listSelector</td>
<td>当条目被点击后，改变条目的背景颜色</td>
</tr>
<tr>
<td>android:divider</td>
<td>设置分割线的颜色</td>
</tr>
<tr>
<td>android:dividerHeight</td>
<td>设置分割线的高度</td>
</tr>
<tr>
<td>android:scrollbars</td>
<td>是否显示滚动条</td>
</tr>
<tr>
<td>android:fadingEdge</td>
<td>去掉上边和下边的黑色阴影</td>
</tr>
</tbody>
</table>
<br>
<br>
<p><strong>常用数据适配器：</strong></p>
<p>数据适配器是数据与视图之间的桥梁</p>
<p>（1）BaseAdapter</p>
<p>是抽象类，通常在自定义数据适配器时会继承这 BaseAdapter，常用的抽象方法如下：</p>
<table>
<thead>
<tr>
<th>方法名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>public int getCount()</td>
<td>获取 Item 条目的总数</td>
</tr>
<tr>
<td>public Object getItem(int position)</td>
<td>根据 position 获取某个 Item 的对象</td>
</tr>
<tr>
<td>piblic long getItemId(int position)</td>
<td>根据 position 获取某个 Item 的id</td>
</tr>
<tr>
<td>public View getView(int position, View convertView, ViewGroup parent)</td>
<td>获取相应 position 对应的 Item 视图，posution 是当前 Item 的位置，convertView用于复用旧视图，parent 用于加载 XML 布局文件</td>
</tr>
</tbody>
</table>
<br>
<p>（2）SimpleAdapter</p>
<p>继承自 BaseAdapter，在进行数据适配时，只要在构造方法中传入相应的参数即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">SimpleAdapter</span><span class="hljs-params">(Context context, List&lt;? extends Map&lt;String, ?&gt;&gt; data, </span><br><span class="hljs-params">		<span class="hljs-type">int</span> resource, String[] from, <span class="hljs-type">int</span>[] to)</span><br></code></pre></td></tr></table></figure>
<ul>
<li>context：上下文对象</li>
<li>data：数据集合。data中的每一项对应 ListView 控件中条目的数据</li>
<li>resource：Item 布局的资源 id</li>
<li>from：Map 集合中的 key 值</li>
<li>to：Item 布局中对应的控件</li>
</ul>
<br>
<p>（3）ArrayAdapter</p>
<p>也是 BaseAdapter 的子类，ArrayAdapter 通常适配 TextView 控件，有多个构造方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">Public <span class="hljs-title function_">ArrayAdapter</span><span class="hljs-params">(Context context, <span class="hljs-type">int</span> resource)</span>;<br>Public <span class="hljs-title function_">ArrayAdapter</span><span class="hljs-params">(Context context, <span class="hljs-type">int</span> resource, <span class="hljs-type">int</span> textViewResourceId;</span><br><span class="hljs-params">Public ArrayAdapter(Context context, <span class="hljs-type">int</span> resource, T[] Objects)</span>;<br>Public <span class="hljs-title function_">ArrayAdapter</span><span class="hljs-params">(Context context, <span class="hljs-type">int</span> resource, <span class="hljs-type">int</span> textViewResourceId, T[] Objects)</span>;<br>Public <span class="hljs-title function_">ArrayAdapter</span><span class="hljs-params">(Context context, <span class="hljs-type">int</span> resource, <span class="hljs-type">int</span> textViewResourceId, List&lt;T&gt; objects)</span>;<br></code></pre></td></tr></table></figure>
<ul>
<li>contexe：上下文对象</li>
<li>resource：Item 布局的资源 id</li>
<li>textViewResourceId：Item 布局中相应的 TextView 控件的 id</li>
<li>T[] Objects：需要适配数组类型的数据</li>
<li>List<t> objects：需要适配 List 类型的数据</t></li>
</ul>
<br>
<h3 id="recyclerview">RecyclerView</h3>
<p>Android5.0后开始提供 RecyclerView控件，该控件可以在有限的窗口范围内显示大量的数据</p>
<p>（1）显示效果</p>
<p>通过 LayoutManager 类实现横向或竖向的列表效果、瀑布流效果和GridView效果</p>
<br>
<p>（2）数据适配器</p>
<p>使用的是 RecyclerView.Adapter，该数据适配器将 BaseAdapter 中的 getView() 方法拆分为 onCreateViewHolder() 方法和 onBindViewHolder() 方法，使代码编写规范化</p>
<br>
<p>（3）复用效果</p>
<p>RecyclerView控件复用 Item 对象的工作由该控件自己实现</p>
<br>
<p>（4）动画效果</p>
<p>可以通过 setItemAnimator() 方法为 Item 添加动画效果</p>
<br>
<h2 id="自定义控件">自定义控件</h2>
<p>通常开发 Android 应用程序的界面时，都不直接使用 View 控件，而是使用 View 控件的子类</p>
<p>虽然 Android 提供了很多继承自 View 类的控件，但是在实际开发中，还会出现不满足需求的情况。此时我们可以通过自定义控件的方式实现</p>
<p>最简单的自定义控件就是创建一个继承 View 类或其子类的类，并重写该类的构造方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Customview</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">View</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">Customview</span> <span class="hljs-params">(Context context)</span> &#123;<br>		<span class="hljs-built_in">super</span>(context);<br>	&#125;<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">CustonView</span> <span class="hljs-params">(Context context, AttributeSet attrs)</span> &#123;<br>		<span class="hljs-built_in">super</span>(context, attrs);<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<p>自定义控件常用的3个方法：</p>
<p>（1）onMeasure() 用于测量尺寸，在该方法中可以设置控件自身或其子控件的宽高</p>
<p>（2）onDraw() 用于绘制图像，<code>onDraw(canvas)</code>中的参数 canvas 表示画布，常搭配 Paint 类（画笔）一起使用</p>
<p>（3）onLayout 用于指定子控件的位置</p>
<br>
<h1 id="程序活动单元-activity">程序活动单元 Activity</h1>
<p>Android 中的四大组件分别是 Activity、Service 、ContentProider 和 BradcastReceiver</p>
<p>其中，Activiry 是一个负责与用户交互的组件，每个 Android 应用程序中都会用Activity来显示界面及处理界面上一些控件的事件</p>
<br>
<h2 id="activity-生命周期">Activity 生命周期</h2>
<p>Activity 的生命周期指的是 Activity 从创建到销毁的整个过程</p>
<p>这个过程大致可以分为 5 种状态，分别是启动状态、运行状态、暂停状态、停止状态和销毁状态</p>
<br>
<p>（1）启动状态</p>
<p>Activity 的启动状态很短暂。一般情况下，当 Activity 启动之后便会进入运行状态</p>
<br>
<p>（2）运行状态</p>
<p>Activity 在此状态时处于界面最前端，它是可见的、有焦点的，并且可以与用户进行交互，如点击界面<br>
中的按钮和在界面上输入信息等</p>
<p>PS：当 Activity 处于运行状态时，Android 会尽可能地保持这种状态，即使出现内存不足的情况，Android 也会先销毁栈底的 Activity 来确保当前 Activity 正常运行</p>
<br>
<p>（3）暂停状态</p>
<p>暂停状态下，Activity 对用户来说仍然可见，但它无法获取焦点，对用户的操作没有响应</p>
<p>例如，当Acivity 上覆盖了一个透明或者非全屏的界面时，被覆盖的 Activity 就处于智停状态</p>
<br>
<p>（4）停止状态</p>
<p>当 Activity 完全不可见时，他就处于停止状态，如果系统内存不足，那么这种状态下的 Activity 很容易被销毁</p>
<br>
<p>（5）</p>
<p>当 Activity 处于销毁状态时，将被清理出内存</p>
<p>PS：Activity 生命周期的启动状态和销毁状态是过渡状态，Acivity 不会在这两个状态停留</p>
<br>
<p><strong>生命周期方法：</strong></p>
<p>Activity 的生命周期包括创建、可见、获取焦点、失去焦点、不可见、重新可见、销毁等环节</p>
<p>针对每个环节 Activity 都定义了相应的回调方法</p>
<ul>
<li>onCreate()：创建 Activity 时调用，通常做一些初始化设置</li>
<li>onStart：Activity 即将可见时调用</li>
<li>onResume()：Activity 获取焦点时调用</li>
<li>onPause()：当前 Activity 被其他 Activity 覆盖或屏幕锁屏时调用</li>
<li>onStop()：Activity 对用户不可见时调用</li>
<li>onRestart()：Activity 从停止状态到再次启动状态时调用</li>
<li>onDestroy()：销毁 Activity 时调用</li>
</ul>
<p><img src="https://gitee.com/Greedy_firtree/picture/raw/master/blog/A7F0D491E3D3CFC72EC24BEB7CBDE2EB.jpg" srcset="/img/loading.gif" lazyload alt="img"></p>
<br>
<h2 id="activity-的创建-配置-关闭">Activity 的创建、配置、关闭</h2>
<p><strong>创建 Activity：</strong></p>
<p>（1）直接创建</p>
<p>（2）配置 Activity</p>
<ul>
<li>先创建一个普通的 Java 类，extends AppCompatActivity</li>
<li>再在 <code>AndroidMainifset.xml</code> 文件的 <code>&lt;application&gt;&lt;/application&gt;</code> 标签内配置</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;activity android:name=<span class="hljs-string">&quot;Activity 的结对路径&quot;</span> /&gt;<br></code></pre></td></tr></table></figure>
<br>
<br>
<p><strong>启动 / 关闭 Activity：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 启动Avtivity，其名为 SecondActivity</span><br><span class="hljs-type">Intent</span> <span class="hljs-variable">intent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>(MainActivity.<span class="hljs-built_in">this</span>, SecondActivity.class);<br>startActivity(intent);<br><br>finish(); <span class="hljs-comment">// 关闭当前Activity</span><br></code></pre></td></tr></table></figure>
<br>
<br>
<h2 id="intent">Intent</h2>
<p>Intent 为意图，是程序中各组件间进行交互的一种重要方式</p>
<p>它不仅可以指定当前组件要执行的动作，还可以在不同组件之间进行数据传递，分为两种类型</p>
<br>
<p><strong>显式 Intent：</strong></p>
<p>显示 Intent 直接指定目标组件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Intent</span> <span class="hljs-variable">intent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>(<span class="hljs-built_in">this</span>, SecondActivity.class);<br>startActivity(intent);<br></code></pre></td></tr></table></figure>
<br>
<br>
<p><strong>隐式 Intent：</strong></p>
<p>影视 Intent 不会明确指出需要激活的目标组件，它被广泛的应用在不同应用程序之间进行消息传递</p>
<p>Android 会使用 IntentFilter 匹配相应的组件，匹配的属性主要包括3个，分别是action、data和 category 属性</p>
<ul>
<li>action：表示 Intent 对象要完成的动作</li>
<li>data：表示 Intent 对象中传递的数据</li>
<li>category ：表示为 action 属性添加的额外信息</li>
</ul>
<p>具体步骤：</p>
<p>（1）在 <code>AndroidMainifest.xml</code> 文件中配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;activity android:name=<span class="hljs-string">&quot;.SecondActivity&quot;</span><br>	&lt;intent-filter&gt;<br>		&lt;action android:name=<span class="hljs-string">&quot;cn.itcase.START_ACTIVITY&quot;</span> /&gt;<br>		&lt;category android:name=<span class="hljs-string">&quot;android.intent.category.DEFAULT&quot;</span> /&gt;<br>    &lt;/intent-filter&gt;<br>&lt;/activity&gt;<br></code></pre></td></tr></table></figure>
<br>
<p>（2）在 MainActivity 中开启</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Intent</span> <span class="hljs-variable">intent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>();<br><br><span class="hljs-comment">// 设置 action 动作，要和清单文件中设置的一样</span><br>intent.setAction(<span class="hljs-string">&quot;cn.itcase.START_ACTIVITY&quot;</span>);<br>startActivity(intent);<br></code></pre></td></tr></table></figure>
<br>
<p>IntentFilter 是过滤器，当系统发送一个隐式 Intent 后， Android 会将它与程序中每一个组件的过滤器进行匹配</p>
<p>匹配的属性有 action、data 和 category，需要这三个属性都匹配成功才能唤起相应的组件</p>
<br>
<h2 id="activity-之间的跳转">Activity 之间的跳转</h2>
<h3 id="数据传递">数据传递</h3>
<p>（1）使用 Intent 的 putExtra() 方法进行传递</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 在从 MainActivity 跳转到 SecondActivity 时</span><br><span class="hljs-comment">// 利用 Intent 传递学生姓名，成绩和成绩是否合格等数据</span><br><span class="hljs-type">Intent</span> <span class="hljs-variable">intent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>();<br>intent.setClass(MainActivity.<span class="hljs-built_in">this</span>, SecondActivity.class);<br>intent.putExtra(<span class="hljs-string">&quot;studentName&quot;</span>, <span class="hljs-string">&quot;小明&quot;</span>);<br>intent.putExtra(<span class="hljs-string">&quot;englishScore&quot;</span>, <span class="hljs-number">98</span>);<br>intent.putExtra(<span class="hljs-string">&quot;isPassed&quot;</span>, <span class="hljs-literal">true</span>);<br>startActivity(intent);<br><br><span class="hljs-comment">// 在 SecondActivity 中通过 getXxxExtra() 方法来获取传过来的数据</span><br><span class="hljs-type">Intent</span> <span class="hljs-variable">intent</span> <span class="hljs-operator">=</span> getIntent();<br><span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> intent.getStringExtra(<span class="hljs-string">&quot;studentName&quot;</span>);<br><span class="hljs-type">int</span> <span class="hljs-variable">englishScore</span> <span class="hljs-operator">=</span> intent.getInExtra(<span class="hljs-string">&quot;englishScore&quot;</span>);<br><span class="hljs-type">boolean</span> <span class="hljs-variable">isPassed</span> <span class="hljs-operator">=</span> intent.getBooleanExtra(<span class="hljs-string">&quot;isPassed&quot;</span>, <span class="hljs-literal">true</span>);<br></code></pre></td></tr></table></figure>
<br>
<p>（2）使用Bubdle 类传递数据</p>
<p>与Map接口类似，通过键值对的形式保存数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Intent</span> <span class="hljs-variable">intent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>();<br>intent.setClass(MainActivity.<span class="hljs-built_in">this</span>, SecondActivity.class);<br><span class="hljs-type">Bundle</span> <span class="hljs-variable">bundle</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bundle</span>();<br>bundle.putString(<span class="hljs-string">&quot;account&quot;</span>, <span class="hljs-string">&quot;小明&quot;</span>);<br>bundle.putString(<span class="hljs-string">&quot;password&quot;</span>, <span class="hljs-string">&quot;123456&quot;</span>);<br>intent.putExtras(bundle);<br>srartActivity(intent);<br><br><span class="hljs-comment">// 获取数据</span><br><span class="hljs-type">Bundle</span> <span class="hljs-variable">bundle</span> <span class="hljs-operator">=</span> getIntent().getExtras();<br><span class="hljs-type">String</span> <span class="hljs-variable">account</span> <span class="hljs-operator">=</span> bundle.getString();<br><span class="hljs-type">String</span> <span class="hljs-variable">pwd</span> <span class="hljs-operator">=</span> bundle.getString();<br></code></pre></td></tr></table></figure>
<br>
<h3 id="数据回传">数据回传</h3>
<p>将数据在 SecondActivity 关闭时传回 MainActivity</p>
<p>（1）startActivityForResult() 方法</p>
<p>用于开启一个 Activity，并且当开启的 Activity 被销毁时，会从销毁的 Activity 中返回数据</p>
<p><code>startActivityForResult(Intent intent, int requestCode)</code></p>
<p>第一个参数为意图对象，第二个参数为请求码</p>
<br>
<p>（2）setResult() 方法</p>
<p>用于携带数据进行回传</p>
<p><code>setResult(int resultCode, Intent intent)</code></p>
<p>第一个参数表示返回码，第二个参数用于携带数据并返回至上一个界面</p>
<br>
<p>（3）onActivityResult() 方法</p>
<p><code>onActivityResult(int requestCode, int resultCode, Intent data)</code></p>
<p>第一个参数表示请求码，第二个参数表示返回码，第三个参数表示回传的数据</p>
<br>
<h3 id="activity-的启动模式">Activity 的启动模式</h3>
<p>Activity 有 4 种启动模式，分别为 standard、singleTop、singleTask 和 singleInstance</p>
<ul>
<li>standard 模式是 Activity 的默认启动方式，每启动一个 Activity 就会在栈顶创建一个新的实例</li>
<li>singleTop 模式会判断要启动的 Activity 实例是否位于栈顶，如果位于栈顶则直接复用，否则创建新的实例</li>
<li>singleTask 模式下每次启动该 Activity 时，系统首先会检查栈中是否存在当前 Activity 实例，如果存在则直接使用，并把当前 Activity 之上的所有实例全部出栈</li>
<li>singleInstance 模式会启动一个新的任务栈来管理 Activity 实例， 无论从哪个任务栈中启动该 Activity，该实例在整个系统中只有一个</li>
</ul>
<br>
<h2 id="fragment">Fragment</h2>
<p>Fragment（碎片）是一种可以嵌入在 Activity 中的 UI 片段，用来描述 Activity 中的一部分布局</p>
<br>
<p><strong>生命周期：</strong></p>
<p>Fragment 不能独立存在，必须嵌入到 Activity 中使用，所以 Fragment 生命周期直接受所在的 Activity 影响</p>
<ul>
<li>
<p>当在 Activity 中创建 Fragment 时，Fragment处于启动状态</p>
</li>
<li>
<p>当 Activity 被暂停时，其中的所有 Fragment 也被暂停</p>
</li>
<li>
<p>当 Activity 被销毁时，所有在该 Activity 中的 Fragment 也被销毁</p>
</li>
<li>
<p>当一个 Activity 处于运行状态时，可以单独地对每-个 Fragment 进行操作</p>
</li>
</ul>
<br>
<p>Fragment 的生命周期与 Activity 的生命周期很相似，额外的有</p>
<ul>
<li>onAttach()：Fragment 和 Activity 建立关联时调用</li>
<li>onCreateView()：Fragment  创建视图（加载布局）时调用</li>
<li>onActivityCreate()：Fragment  相关联的 Activity 已经创建完成时调用</li>
<li>onDestoryView()：Fragment 关联的视图被移除时调用</li>
<li>onDetach()：Fragment  和 Activity 接触关联时调用</li>
</ul>
<p><img src="https://gitee.com/Greedy_firtree/picture/raw/master/blog/image-20230612190724983.png" srcset="/img/loading.gif" lazyload alt="image-20230612190724983"></p>
<br>
<br>
<p><strong>创建 Fragment</strong></p>
<p>创建 Fragment 时必须创建一个类继承 Fragment</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NewsListFragment</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Fragment</span> &#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> View <span class="hljs-title function_">onCreateView</span><span class="hljs-params">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span> &#123;<br>		<span class="hljs-type">View</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> inflater.inflate(R.layout.fragment, container, <span class="hljs-literal">false</span>);<br>		<span class="hljs-keyword">return</span> v;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<br>
<p><strong>在 Activity 中添加 Fragment</strong></p>
<p>Fragment 创建完成后并不能单独使用，需要将 Fragment 添加到 Activity 中</p>
<p>（1）在布局文件中添加，必须指定 <code>android:name</code> 属性，其值为 Fragment 的全路径名称</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">&quot;http://schemas.android.com/skp/res/android&quot;</span></span><br><span class="hljs-tag">	<span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;match_parent&quot;</span></span><br><span class="hljs-tag">	<span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;match_parent&quot;</span>&gt;</span><br>	<br>	<span class="hljs-tag">&lt;<span class="hljs-name">Fragment</span></span><br><span class="hljs-tag">		<span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;cn.itcase.NewsListFragment&quot;</span></span><br><span class="hljs-tag">		<span class="hljs-attr">android:id</span>=<span class="hljs-string">&quot;@+id/newsList&quot;</span></span><br><span class="hljs-tag">		<span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;match_parent&quot;</span></span><br><span class="hljs-tag">		<span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;match_parent&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span><br></code></pre></td></tr></table></figure>
<br>
<p>（2）在 Activity 中动态的加载 Fragment</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Activity</span> &#123;<br>	<span class="hljs-meta">@SuppressLint(&quot;NesApi&quot;)</span><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(bundle sacedInstance)</span> &#123;<br>		<span class="hljs-built_in">super</span>.onCreate(sacedInstance);<br>        setContentView(R.layout.activity_main);<br>        <br>        <span class="hljs-comment">// 实例化Fragment对象</span><br>        <span class="hljs-type">NewsListFragment</span> <span class="hljs-variable">fragment</span> <span class="hljs-operator">=</span> nre <span class="hljs-title function_">NewsListFragment</span><span class="hljs-params">()</span>;<br>        <br>        <span class="hljs-comment">// 获取FragmentTransaction实例</span><br>        <span class="hljs-type">FragmentManager</span> <span class="hljs-variable">fm</span> <span class="hljs-operator">=</span> getFragmentManager();<br>        <br>        <span class="hljs-comment">// 开启FragmentTransaction事务</span><br>        <span class="hljs-type">FragmentTransaction</span> <span class="hljs-variable">beginTransaction</span> <span class="hljs-operator">=</span> fm.beginTransaction();<br>        <br>        beginTransaction.replace(R.id.ll, fragment);<br>        beginTransaction.commit();	<span class="hljs-comment">// 提交事务</span><br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<h1 id="数据存储">数据存储</h1>
<p>Andioid 平台提供了 5 种数据存储方式</p>
<table>
<thead>
<tr>
<th>存储方式</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr>
<td>文件存储</td>
<td>提供了openFileInput()方法和openFileOutput() 方法来读取设备上的文件</td>
</tr>
<tr>
<td>SharedPerences 存储</td>
<td>以 XML 格式将数据存储到设备中</td>
</tr>
<tr>
<td>SQLite 数据库存储</td>
<td>自带的轻量级的数据库。运算速度快，占用资源少，还支持基本 SQL 语法</td>
</tr>
<tr>
<td>ContentProvider</td>
<td>Android 四大组件之一，主要应用于程序之间的数据交换，可以将自己的数据共享给其他应用程序</td>
</tr>
<tr>
<td>网络存储</td>
<td>通过网络提供的存储空间来存储 / 获取数据信息</td>
</tr>
</tbody>
</table>
<br>
<h2 id="文件存储">文件存储</h2>
<h3 id="将文件存入文件">将文件存入文件</h3>
<p>有两种存储方式：内部存储和外部存储</p>
<br>
<p><strong>内部存储</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fos</span> <span class="hljs-operator">=</span> openFileOutput(String name, <span class="hljs-type">int</span> mode);<br><span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> openFileInput(String name)<br></code></pre></td></tr></table></figure>
<p>参数 name 表示文件名，mode 表示文件的操作模式，可选的取值有 4 种：</p>
<ul>
<li>MODE_ PRIVATER：该文件只能被当前程序读写</li>
<li>MODE_ APPEND：该文件的内容可以追加</li>
<li>MODE_ WORLD_ READABLE：该文件的内容可以被其他程序读</li>
<li>MODE_ WORLD_ WRITEABLE：该文件的内容可以被其他程序写</li>
</ul>
<br>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;data.txt&quot;</span>;	<span class="hljs-comment">// 文件名称</span><br><span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;helloworld&quot;</span>;	<span class="hljs-comment">// 保存数据</span><br><span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fos</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br><span class="hljs-keyword">try</span> &#123;<br>    fos = openFileOutput(fileName, MODE_PRIVATE);<br>    fos.write(content.getBytes());  <span class="hljs-comment">// 将数据写入文件中</span><br>&#125;<br><span class="hljs-keyword">catch</span> (Exception e) &#123;<br>    e.printStackTrace();<br>&#125;<br><span class="hljs-keyword">finally</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-keyword">if</span> (fos != <span class="hljs-literal">null</span>) &#123;<br>            fos.close();    <span class="hljs-comment">// 关闭输出流</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>        e.printStackTrace();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<br>
<p><strong>外部存储</strong></p>
<p>是指将数据以文件的形式存储到一些外部设备（例如 SD 卡或者设备内嵌的存储卡），属于永久性的存储方式</p>
<p>外部存储的文件可以被其他应用程序共享</p>
<br>
<p>eg. 向外部设备（SD 卡）中存储数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">state</span> <span class="hljs-operator">=</span> Environment.getExternalStorageState();   <span class="hljs-comment">// 获取 SD 卡的状态</span><br><br><span class="hljs-keyword">if</span> (state.equals(Environment.MEDIA_MOUNTED)) &#123;  <span class="hljs-comment">// 判断 SD 卡是否可用</span><br>    <span class="hljs-type">File</span> <span class="hljs-variable">SDPath</span> <span class="hljs-operator">=</span> Environment.getExternalStorageDirectory();    <span class="hljs-comment">// 获取 SD 卡路径</span><br>   <br>    <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(SDPath, <span class="hljs-string">&quot;data.txt&quot;</span>);<br><br>    <span class="hljs-type">String</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Helloworld&quot;</span>;<br>    <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fos</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>    <span class="hljs-keyword">try</span> &#123;<br>        fos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(file);<br>        fos.write(data.getBytes());<br>    &#125;<br>    <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>        e.printStackTrace();<br>    &#125;<br>    <span class="hljs-keyword">finally</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">if</span> (fos != <span class="hljs-literal">null</span>) &#123;<br>                fos.close();<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<h3 id="从文件中读取数据">从文件中读取数据</h3>
<p><strong>读取内部存储文件中的数据</strong></p>
<p>使用 FileInputStream 对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br><span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br><span class="hljs-keyword">try</span> &#123;<br>    fis = openFileInput(<span class="hljs-string">&quot;data.txt&quot;</span>);<br>    <span class="hljs-type">byte</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[fis.available()];<br>    fis.read(buffer);<br>    content = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(buffer);<br>&#125;<br><span class="hljs-keyword">catch</span> (Exception e) &#123;<br>    e.printStackTrace();<br>&#125;<br><span class="hljs-keyword">finally</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-keyword">if</span> (fis != <span class="hljs-literal">null</span>) &#123;<br>            fis.close();<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>        e.printStackTrace();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<br>
<p><strong>读取外部存储文件中的数据</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">state</span> <span class="hljs-operator">=</span> Environment.getExternalStorageState();<br><span class="hljs-type">File</span> <span class="hljs-variable">SDPath</span> <span class="hljs-operator">=</span> Environment.getExternalStorageDirectory();    <span class="hljs-comment">// 获取SD卡路径</span><br><br><span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(SDPath, <span class="hljs-string">&quot;data.txt&quot;</span>);<br><span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br><span class="hljs-keyword">try</span> &#123;<br>    fis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(file);<br>    br = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(fis));<br>    <span class="hljs-type">String</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> br.readLine();<br>&#125;<br><span class="hljs-keyword">catch</span> (Exception e) &#123;<br>    e.printStackTrace();<br>&#125;<br><span class="hljs-keyword">finally</span> &#123;<br>    <span class="hljs-keyword">if</span> (br != <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            br.close();<br>        &#125;<br>        <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (fis != <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            fis.close();<br>        &#125;<br>        <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<br>
<h2 id="sharepreferences-存储">SharePreferences 存储</h2>
<p>SharePreferences 是 Android 上的一个轻量级存储类，当程序中有一些少量的数据需要持久化存储时，可以使用 SharePreferences。</p>
<h3 id="将数据存入-sharepreferences">将数据存入 SharePreferences</h3>
<p>使用 SharePreferences 存储数据时，首先需要调用 getSharedPreferences() 方法获取 SharePreferences 的实例对象</p>
<p>因为该对象本身只能获取数据，不能对数据进行存储和修改，所以需要调用 edit() 方法获取到可编辑的 Edior 对象</p>
<p>最后通过 Edior 对象的 puxXxx() 方法存储数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 获取 SharePreferences 实例对象</span><br><span class="hljs-type">SharedPreferences</span> <span class="hljs-variable">sp</span> <span class="hljs-operator">=</span> getSharedPreferences(<span class="hljs-string">&quot;data&quot;</span>, MODE_PRIVATE);<br><br><span class="hljs-comment">// 获取编辑器</span><br>SharedPreferences.<span class="hljs-type">Editor</span> <span class="hljs-variable">editor</span> <span class="hljs-operator">=</span> sp.edit();<br><br><span class="hljs-comment">// 存入数据</span><br>editor.putString(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;张三&quot;</span>);<br>editor.putInt(<span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-number">18</span>);<br><br><span class="hljs-comment">// 提交</span><br>editor.commit();<br></code></pre></td></tr></table></figure>
<br>
<h3 id="读取-删除-sharepreferences-中的数据">读取 / 删除 SharePreferences 中的数据</h3>
<p><strong>读取数据：</strong></p>
<p>只需要获取 SharePreferences 对象，然后通过 getXxx() 方法获取数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">SharedPreferences</span> <span class="hljs-variable">sp</span> <span class="hljs-operator">=</span> getSharedPreferences(<span class="hljs-string">&quot;data&quot;</span>, MODE_PRIVATE);<br><span class="hljs-type">String</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> sp.getString(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br></code></pre></td></tr></table></figure>
<p>第二个参数为缺省值，当 key 值不存在时，返回缺省值</p>
<br>
<br>
<p><strong>删除数据：</strong></p>
<p>只需要调用 Editor 对象的 remove() 方法或者 clear() 方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">editor.remove(<span class="hljs-string">&quot;name&quot;</span>);	<span class="hljs-comment">// 删除 key 为&quot;name&quot; 的数据</span><br>editor.clear();			<span class="hljs-comment">// 删除所有数据</span><br></code></pre></td></tr></table></figure>
<p>PS：</p>
<p>获取数据的 key 值与存入数据的 key 值数据类型要一致，否则查找不到指定数据</p>
<p>保存 SharedPreferences 的 key 值时，可使用静态常量保存以免操作时写错</p>
<br>
<h2 id="sqlite-数据库存储">SQLite 数据库存储</h2>
<h3 id="创建-sqlite">创建 SQLite</h3>
<p>先创建一个继承 SQLitePOpenHelper 的类，在重写 onCreate() 方法和 onUpgrade() 方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyHelper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SQLiteOpenHelper</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyHelper</span><span class="hljs-params">(Context context)</span> &#123;<br>        <span class="hljs-built_in">super</span>(context, <span class="hljs-string">&quot;itcase.db&quot;</span>, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// 数据库第一次被创建时调用该方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(SQLiteDatabase db)</span> &#123;<br>        <span class="hljs-comment">// 初始化表的结构，执行建表的SQL语句</span><br>        db.execSQL(<span class="hljs-string">&quot;CREATE TABLE information(_id INTEGER PRIMARY KEY AUTOINCREMENT, name VARCHAR(20), price INTEGER)&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// 当数据库的版本号增加时调用</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onUpgrade</span><span class="hljs-params">(SQLiteDatabase db, <span class="hljs-type">int</span> oldVersion, <span class="hljs-type">int</span> newVersion)</span> &#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>在该方法中通过 super 方法调用父类的构造方法，并传入四个参数</p>
<p>分别是上下文对象、数据库名称、游标工厂（通常是null）和数据库版本</p>
<br>
<h3 id="sqlite-的基本操作">SQLite 的基本操作</h3>
<p><strong>新增数据</strong></p>
<p>使用 SQLiteDatabase 类的 insert() 方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(String name, String price)</span> &#123;<br>    <span class="hljs-type">MyHelper</span> <span class="hljs-variable">helper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyHelper</span>(MainActivity.<span class="hljs-built_in">this</span>);<br><br>    <span class="hljs-comment">// 获取可读写的 SQLiteDatabase 对象</span><br>    <span class="hljs-type">SQLiteDatabase</span> <span class="hljs-variable">db</span> <span class="hljs-operator">=</span> helper.getReadableDatabase();<br><br>    <span class="hljs-comment">// 创建 ContentValues 对象</span><br>    <span class="hljs-type">ContentValues</span> <span class="hljs-variable">values</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ContentValues</span>();<br><br>    <span class="hljs-comment">// 将数据添加到 ContentValues 对象中</span><br>    values.put(<span class="hljs-string">&quot;name&quot;</span>, name);<br>    values.put(<span class="hljs-string">&quot;price&quot;</span>, price);<br><br>    <span class="hljs-comment">// 插入一条数据到 information 表中</span><br>    <span class="hljs-type">long</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> db.insert(<span class="hljs-string">&quot;information&quot;</span>, <span class="hljs-literal">null</span>, values);<br>    <br>    <span class="hljs-comment">// 使用后一定要调用 close() 关闭数据库连接</span><br>    db.close();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>Insert() 方法可以接受三个参数：</p>
<p>第一个参数是数据表的名称</p>
<p>第二个参数表示：如果发现将要插入的行为空行，会将这个列名的值设为null</p>
<p>第三个参数为 ContentValues 对象</p>
<br>
<br>
<p><strong>删除数据</strong></p>
<p>使用 SQLiteDatabase 类的 delete() 方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">delete</span><span class="hljs-params">(<span class="hljs-type">long</span> id)</span> &#123;<br>    <span class="hljs-type">MyHelper</span> <span class="hljs-variable">helper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyHelper</span>(MainActivity.<span class="hljs-built_in">this</span>);<br>    <span class="hljs-type">SQLiteDatabase</span> <span class="hljs-variable">db</span> <span class="hljs-operator">=</span> helper.getWritableDatabase();<br><br>    <span class="hljs-type">int</span> <span class="hljs-variable">number</span> <span class="hljs-operator">=</span> db.delete(<span class="hljs-string">&quot;information&quot;</span>, <span class="hljs-string">&quot;_id=?&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]&#123;id+<span class="hljs-string">&quot;&quot;</span>&#125;);<br>    db.close();<br>    <span class="hljs-keyword">return</span> number;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>删除数据时不需要使用 ContentValues  类来添加参数</p>
<p>而是使用一个字符串和一个字符串数组来添加参数名和参数值</p>
<br>
<br>
<p><strong>修改数据</strong></p>
<p>使用 SQLiteDatabase 类的 update() 方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">update</span><span class="hljs-params">(String name, String price)</span> &#123;<br>    <span class="hljs-type">MyHelper</span> <span class="hljs-variable">helper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyHelper</span>(MainActivity.<span class="hljs-built_in">this</span>);<br>    <span class="hljs-type">SQLiteDatabase</span> <span class="hljs-variable">db</span> <span class="hljs-operator">=</span> helper.getWritableDatabase();<br><br>    <span class="hljs-type">ContentValues</span> <span class="hljs-variable">values</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ContentValues</span>();<br>    values.put(<span class="hljs-string">&quot;price&quot;</span>, price);<br><br>    <span class="hljs-type">int</span> <span class="hljs-variable">number</span> <span class="hljs-operator">=</span> db.update(<span class="hljs-string">&quot;information&quot;</span>, values, <span class="hljs-string">&quot;name=?&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]&#123;name&#125;);<br><br>    db.close();<br>    <span class="hljs-keyword">return</span> number;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>update() 方法传递了四个参数：</p>
<p>第一个参数表示数据库表的名称</p>
<p>第二个参数表示最新的数据</p>
<p>第三个参数是要修改的数据的查找条件</p>
<p>第四个参数表示查找条件的参数</p>
<br>
<br>
<p><strong>查询数据</strong></p>
<p>使用 SQLiteDatabase 类的 query() 方法，该方法返回的是一个行数集合 Cursor</p>
<p>在使用完 Cuesor 后，一点要及时关闭否则会造成内存泄漏</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> id)</span> &#123;<br>    <span class="hljs-type">MyHelper</span> <span class="hljs-variable">helper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyHelper</span>(MainActivity.<span class="hljs-built_in">this</span>);<br>    <span class="hljs-type">SQLiteDatabase</span> <span class="hljs-variable">db</span> <span class="hljs-operator">=</span> helper.getWritableDatabase();<br><br>    <span class="hljs-type">Cursor</span> <span class="hljs-variable">cursor</span> <span class="hljs-operator">=</span> db.query(<span class="hljs-string">&quot;information&quot;</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">&quot;_id=?&quot;</span>,<br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]&#123;id+<span class="hljs-string">&quot;&quot;</span>&#125;, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);<br>    <span class="hljs-keyword">if</span> (cursor.getCount() != <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-comment">// Curse 提供了遍历查询的方法</span><br>        <span class="hljs-keyword">while</span> (cursor.moveToNext()) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">_id</span> <span class="hljs-operator">=</span> cursor.getString(cursor.getColumnIndex(<span class="hljs-string">&quot;_id&quot;</span>));<br>            <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> cursor.getString(cursor.getColumnIndex(<span class="hljs-string">&quot;name&quot;</span>));<br>            <span class="hljs-type">String</span> <span class="hljs-variable">price</span> <span class="hljs-operator">=</span> cursor.getString(cursor.getColumnIndex(<span class="hljs-string">&quot;price&quot;</span>));<br>        &#125;<br>    &#125;<br>    cursor.close();<br>    db.close();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>query() 方法包含七个参数</p>
<p>第一个参数表示表的名称、第二个参数表示询问的列名</p>
<p>第三个参数表示接收查询条件的子句，第四个参数表示接收查询子句对应的条件值</p>
<p>第五个参数表示分组方式，第六个参数用于接收 having 条件、第七个参数表示排序方式</p>
<br>
<br>
<p><strong>使用 SQL 语句进行数据库操作</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 添加一条数据</span><br>db.execSQL(<span class="hljs-string">&quot;insert into information (name, price) values (?, ?)&quot;</span>, <br>										<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]&#123;name, price&#125;);<br><br><span class="hljs-comment">// 删除一条数据</span><br>db.execSQL(<span class="hljs-string">&quot;delete from infromation where _id = 1&quot;</span>);<br><br><span class="hljs-comment">// 修改一条数据</span><br>db.execSQL(<span class="hljs-string">&quot;update infromation set name=? where price=?&quot;</span>, <br>										<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]&#123;name, price&#125;);<br>										<br><span class="hljs-comment">// 查询</span><br><span class="hljs-type">Cursor</span> <span class="hljs-variable">cursor</span> <span class="hljs-operator">=</span> db.rawQuery(<span class="hljs-string">&quot;select * from information where name=?&quot;</span>, <br>										<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]&#123;name&#125;);<br></code></pre></td></tr></table></figure>
<br>
<h3 id="sqlite-数据库的事务">SQLite 数据库的事务</h3>
<p>数据库事务是一个对数据库执行工作的单元，是针对数据库的一组操作，它可以由一条或多条 SQL 语句组成</p>
<p>事务是以逻辑顺序完成的工作单位或序列，可以由用户手动操作完成，也可以由某种数据库程序自动完成</p>
<br>
<p>事务的操作比较严格，它必须包括 ACID</p>
<p>ACID 是指数据库事务正确执行的 4 个基本要素：包括原子性、一致性、隔离性和持久性</p>
<br>
<p>eg. 张三取出 1000 元，王五存入 1000 元</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">MyHelper</span> <span class="hljs-variable">helper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyHelper</span>(MainActivity.<span class="hljs-built_in">this</span>);<br><span class="hljs-type">SQLiteDatabase</span> <span class="hljs-variable">db</span> <span class="hljs-operator">=</span> helper.getWritableDatabase();<br><br><span class="hljs-comment">// 开启事务</span><br>db.beginTransaction();<br><span class="hljs-keyword">try</span> &#123;<br>    db.execSQL(<span class="hljs-string">&quot;update information set account = account - 1000 where name=?&quot;</span>,<br>             <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]&#123;<span class="hljs-string">&quot;张三&quot;</span>&#125;);<br><br>    db.execSQL(<span class="hljs-string">&quot;update information set account = account + 1000 where name=?&quot;</span>,<br>             <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]&#123;<span class="hljs-string">&quot;王五&quot;</span>&#125;);<br><br>    <span class="hljs-comment">// 标记数据库事务执行成功</span><br>    db.setTransactionSuccessful();<br>&#125;<br><span class="hljs-keyword">catch</span> (Exception e) &#123;<br>    Log.i(<span class="hljs-string">&quot;事务执行失败&quot;</span>, e.toString());<br>&#125;<br><span class="hljs-keyword">finally</span> &#123;<br>    db.endTransaction();   <span class="hljs-comment">// 关闭事务</span><br>    db.close();            <span class="hljs-comment">// 关闭数据库</span><br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<h1 id="内容提供者和内容观察者">内容提供者和内容观察者</h1>
<p>为了实现跨程序共享数据的功能，Android 提供了一个组件 contentProvider（内容提供者）</p>
<p>为了观察程序中数据的变化，Android 提供了一个内容观察者</p>
<br>
<h2 id="内容提供者">内容提供者</h2>
<p>若程序之间需要共享数据，则会使用 contentProvider，<strong>contentProvider是Android四大组件之一</strong></p>
<p>它不仅允许一个程序访问另一个程序，同时还可以选择对哪一部分数据进行共享</p>
<p>contentProvider 类的实例需要通过 Context 中的 getContentResolve() 方法获取</p>
<br>
<p><img src="https://gitee.com/Greedy_firtree/picture/raw/master/blog/image-20230613214145413.png" srcset="/img/loading.gif" lazyload alt="image-20230613214145413"></p>
<p><strong>1.数据模型（Data Model）</strong></p>
<p>contentProvider 使用基于数据库模型的简单表格来提供需要共享的数据</p>
<br>
<br>
<p><strong>2.Uri</strong></p>
<p>contentProvider 与 SQLiteDatabase 类似，提供了一系列增、删、改、查的方法对数据进行操作</p>
<p>不同的是，contentProvider 中的增、删、改、查方法以 Uri 的形式对外提供数据，Uri 为 contentProvider 中的数据建立了唯一的标识符</p>
<p>Uri 主要由 3 部分组成，分别是 scheme、authority 和 path：</p>
<ul>
<li>scheme 是以 “content://&quot; 开头的前级，表示操作的数据被 contentProvider 控制，不会被修改;</li>
<li>authority 表示为 contentProvider 设置的唯一标识，该标识主要用来区分不同的应用程序</li>
<li>path 表示资源或数据，当访问者需要操作不同的数据时，该部分可以动态修改</li>
</ul>
<br>
<h2 id="创建内容提供者">创建内容提供者</h2>
<p>如果想要创建一个内容提供者， 则首先需要创建一个继承抽象类 contentProvider 的类</p>
<p>接着重写该类中的 onCreate()、insert()、delete()、 update()、 query()、getType()方法</p>
<br>
<p>先在程序包名处新建一个 【Content Provider】文件，指定内容提供者的名称和唯一标识（一般为包名）</p>
<p>内容提供者创建完成后， Android Studio 会在 AndroidManifest.xml 文件中进行注册</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">provider</span></span><br><span class="hljs-tag">	<span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;.MyContentProvider&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:authorities</span>=<span class="hljs-string">&quot;com.example.try01&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:enabled</span>=<span class="hljs-string">&quot;true&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:exported</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">provider</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><provider> 标签中的配置用于注册创建的 MyContentProvider：</provider></p>
<ul>
<li>name：该属性的值是 MyContentProvider 的全名称</li>
<li>authorities：该属性的值标识了 MyContentProvider 提供的数据，该值可以是一个或多个URI authority，多个 authority 名称之间需要用分号隔开，该属性的值通常设置为包名</li>
<li>enabled：该属性的值表示 MyContentProvider 能否被系统实例化。默认的值为true</li>
<li>exported：该属性的值表示 MyContentProvider 能否被其他应用程序使用</li>
</ul>
<p>PS：每个应用程序中创建的 ContentProvider 都必须在 AndroidManifest.xml 文件的 <provider> 标签中定义</provider></p>
<br>
<h2 id="访问其他应用程序的数据">访问其他应用程序的数据</h2>
<p>在不同应用程序之间交换数据时，应用程序会通过 ContentProvider 暴露自己的数据，并通过 ContentResolver 对程序暴露的数据进行操作，因此 ContentResolver 充当着一个 “中介” 的角色</p>
<p>因为在使用 ContentProvider 暴露数据时提供了相应操作的 Uri ，所以在访问现有的 ContentProvider 时要指定相应的 Uri，然后再通过 ContentResolver 来实现对数据的操作</p>
<p>（1）通过 parse() 方法解析 Uri</p>
<p>首先通过 Uri的 parse() 方法将字符串 Uri 解析为一个 Uri 类型的对象</p>
<p><code>Uri uri = Uri.parse (&quot;content://cn.itcast.mycontentprovider/person&quot;);</code></p>
<br>
<p>（2）通过 query() 方法查询数据</p>
<p>通过 getContentReolver() 方法获取 CntenResolver 对象，调用该对象的 query() 方法查询数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">ContentResolver</span> <span class="hljs-variable">resolver</span> <span class="hljs-operator">=</span> context.getContentResolver();<br><span class="hljs-type">Cursor</span> <span class="hljs-variable">cursor</span> <span class="hljs-operator">=</span> resolver.query(Uri uri, String[] projection, String selection,<br>                                    String[] selectionArgs, String sortOrder);<br></code></pre></td></tr></table></figure>
<ul>
<li>uri：表示查询其他程序的数据时需要的Uri</li>
<li>projection：表示要查询的内容，该内容相当于数据库表中每列的名称</li>
<li>selection：表示设置的查询条件，相当于SQL语句中的 where，如果该参数传入的值为 null，则表示没有查询条件</li>
<li>selectionArgs：该参数需要配合参数 selection 使用，如果参数 selection 中有 “?”，则传递的参数<br>
selectionArgs 会替换掉 “?”，否则参数 selectionArgs 传递的值为null</li>
<li>SortOrder：表示查询的数据按照什么顺序进行排序，默认升序。若想降序，则传递的值为&quot; DESC&quot;</li>
</ul>
<br>
<p>（3）通过 while() 循环语句遍历查询的数据</p>
<p>通过query() 方法查询数据后，会将该数据存放在 Cursor 对象中</p>
<p>接着通过 while 循坏语句将 Cursor 对象中的数据遍历出来，最后调用 Cursor 对象的 close() 方法来关闭</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">while</span> (cursor.moveToNext()) &#123;<br>	<span class="hljs-type">String</span> <span class="hljs-variable">address</span> <span class="hljs-operator">=</span> cursor.getString(<span class="hljs-number">0</span>);<br>	<span class="hljs-type">long</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> cursor.getLong(<span class="hljs-number">1</span>);<br>	<span class="hljs-type">int</span> <span class="hljs-variable">type</span> <span class="hljs-operator">=</span> cursor.getInt(<span class="hljs-number">2</span>);<br>&#125;<br>cursor.close();<br></code></pre></td></tr></table></figure>
<br>
<h2 id="urimatch-类">UriMatch 类</h2>
<p>每个 ContentProvider 都会有一个 Uri，当对 ContentProvider 中的数据进行操作时，会通过对应的 Uri 指定相关的数据并进行操作，如果一个 ContentProvider 中含有多个数据源，就需要对不同的 Uri 进行区分，此时可以用 UriMatcher 类对 Uri 进行匹配</p>
<p>（1）初始化 UriMatcher 类<br>
在 ContentProvider 中对 UriMatcher 类进行初始化</p>
<p><code>UriMatcher matcher = new UriMatcher(UriMatcher.NO_MATCH);</code></p>
<p>在上述代码中，构造函数 UriMacher 的参数表示 Uri 没有匹配成功的匹配码，该匹配码通常使用 -1 来表示</p>
<br>
<p>（2）注册需要的Uri</p>
<p>将需要用的 Uri 通过 addURI() 方法注册到 UriMacher 对象中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">matcher.addURI(<span class="hljs-string">&quot;cn.itcast.contentprovider&quot;</span>, <span class="hljs-string">&quot;people&quot;</span>, PEOPLE);<br>matcher.addURI(<span class="hljs-string">&quot;cn.itcast.contentprovider&quot;</span>, <span class="hljs-string">&quot;peoson/#&quot;</span>, PEOPLE_ID);<br></code></pre></td></tr></table></figure>
<p>在上述代码中，addURI() 方法中的第1个参数表示 Uri 的 authority 部分，第2个参数表示 Uri 的 path 部分，第3个参数表示 Uri 匹配成功后返回的匹配码</p>
<br>
<p>（3）与已经注册的 Uri 进行匹配</p>
<p>在 ContentProvider 重写的 query()、insert()、 update()、 delete() 方法中，可以通过 UriMatcher 对象的 match() 方法来匹配 Uri，通过 switch() 循环语句将每个匹配结果区分开，并做相应的操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Uri</span> <span class="hljs-variable">uri</span> <span class="hljs-operator">=</span> Uri.parse(<span class="hljs-string">&quot;content://&quot;</span> + <span class="hljs-string">&quot;cn.itcast.contentprovider&quot;</span> + <span class="hljs-string">&quot;/people&quot;</span>);<br><span class="hljs-type">int</span> <span class="hljs-variable">match</span> <span class="hljs-operator">=</span> matcher.match(uri);<br><span class="hljs-keyword">switch</span> (match) &#123;<br>	<span class="hljs-keyword">case</span> PEOPLE:<br>		...<br>    <span class="hljs-keyword">case</span> PEOPLE_ID:<br>    	...<br>   	<span class="hljs-keyword">default</span>:<br>   		<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<h2 id="内容观察者">内容观察者</h2>
<p>内容观察者（ContentObserver）用于观察指定 Uri 代表的数据的变化</p>
<p>当 ContentObserver 观察到指定 Uri 代表的数据发生变化时就触发 ContentObserver 的 onChange() 方法</p>
<p>此时在 onChange() 方法中使用 ContentResovler 可以查询到变化的数据</p>
<br>
<p><strong>创建内容观察者</strong></p>
<p>在 Android 程序中，创建一个继承 ContentObserver 类的 MyObserver 类并重写构造方法和onChange() 方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyObserver</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ContentObserver</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">MyObserver</span> <span class="hljs-params">(Handler handler)</span> &#123;<br>		<span class="hljs-built_in">super</span> (handler);<br>    &#125;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onChange</span> <span class="hljs-params">(<span class="hljs-type">boolean</span> selfChange)</span> &#123;<br>		<span class="hljs-built_in">super</span>.onChange(selfChange);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>在上述代码中，构造方法 MyObserver() 中的 handler 参数可以是主线程中的 Handler 对象，也可以是其他线程中的 Handler 对象。当 MyObserver 类观察到Uri代表的数据发生变化时，程序会回调 onChange() 方法</p>
<br>
<br>
<p><strong>注册内容观察者</strong></p>
<p>首先通过 getContentResolver() 方法获取 ContentResolver 的对象 resolver</p>
<p>接着通过该对象 registerContentObserver() 方法来注册创建的内容观察者</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">ContentResolver</span> <span class="hljs-variable">resolver</span> <span class="hljs-operator">=</span> getContentResolver();<br><span class="hljs-type">Uri</span> <span class="hljs-variable">uri</span> <span class="hljs-operator">=</span> Uri.parse(<span class="hljs-string">&quot;content://aaa.bbb.ccc&quot;</span>);<br><br><span class="hljs-comment">//注册内容观察者</span><br>resolver.registerContentObserver(uri, <span class="hljs-literal">true</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyObserver</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Handler</span>()));<br></code></pre></td></tr></table></figure>
<p>registerContentObservert() 方法中：</p>
<p>第 1 个参数表示内容提供者的Uri</p>
<p>第 2 个参数表示是否只匹配提供的 Uri，当该参数为 true 时，表示可以匹配 Uri 派生的其他 Uri；为 false 时，表示只匹配当前提供的Uri</p>
<p>第 3 个参数表示创建的内容观察者</p>
<br>
<br>
<p><strong>取消注册内容观察者</strong><br>
当不需要内容观察者时，可以通过 unregisterContentObserver() 方法取消注册</p>
<p>通常情况下，取消注册的操作会在 Activity 的 onDestroy() 方法中进行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDestroy</span><span class="hljs-params">()</span> &#123;<br>	<span class="hljs-built_in">super</span>.onDestroy() ;<br>    <br>    <span class="hljs-comment">// 取消注册内容观察者</span><br>	getContentResolver().unregisterContentObserver(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyObserver</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Handler</span>()));<br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<h1 id="广播机制">广播机制</h1>
<p>在 Android 中，广 播是一种在组件之间传递消息的机制</p>
<p>如果要接收并过滤广播中的消息，则需要使用 BroadeastReceiver（广播接收者）</p>
<p>广播接收者是四大组件之一， 通过广播接收者可以监听系统中的广播消息，实现在不同组件之间的通信</p>
<br>
<ul>
<li>广播接收者通过 Binder 机制在处理中心中进行注册</li>
<li>广播发送者通过 Binder 机制向 AMS 发送广播</li>
<li>AMS 查找到符合相应条件的广播接收者，会将广播发送到相应的消息循环队列中</li>
<li>程序执行消息循环时会获取到此广播，并会回调广播接收者中的 onReceive() 方法进行相关的处理</li>
<li>对于不同的广播类型与不同的广播接收者的注册方式，广播机制在具体实现上会有不同</li>
</ul>
<p>广播发送者和广播接收者分别属于观察者模式中的消息发布和消息订阅两端，AMS 属于中间的处理中心</p>
<br>
<p>广播作为 Andoid 组件间的通信方式，可以使用的场景：</p>
<ul>
<li>在同一个 App 内部的同一组件内进行消息通信（单个或多个线程之间）</li>
<li>在同一个 App 内部的不同组件之间进行消息通信（单个进程）</li>
<li>在同一个 App 具有多个进程的不同组件之间进行消息通信</li>
<li>在不同App的组件之间进行消息通信</li>
<li>在特定情况下，Acdroid 与 App 之间进行消息通信</li>
</ul>
<br>
<h3 id="创建广播接收者">创建广播接收者</h3>
<p>（1）创建一个继承 BroadcastReceiver 的类并重写 onReceiver() 方法</p>
<p>（2）直接 new 一个【Broadcast Receiver】</p>
<br>
<h3 id="注册广播接收者">注册广播接收者</h3>
<ul>
<li>动态注册：在 Activity 中通过代码注册</li>
<li>静态注册：在清单文件中通过配置广播接收者完成注册</li>
</ul>
<br>
<p>（1）动态注册</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> &#123;<br>    <span class="hljs-keyword">private</span> MyBroadcastReceiver receiver;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> &#123;<br>        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);<br>        setContentView(R.layout.activity_main);<br><br><br>        receiver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyBroadcastReceiver</span>();<br>        <br>        <span class="hljs-comment">// 实例化过滤器并设置要过滤的 action</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">action</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;android.provider.Telephony.SMS_RECEIVED&quot;</span>;<br>        <span class="hljs-type">IntentFilter</span> <span class="hljs-variable">intentFilter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntentFilter</span>();<br>        intentFilter.addAction(action);<br>        <br>        <span class="hljs-comment">// 注册广播</span><br>        registerReceiver(receiver, intentFilter);<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDestroy</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">super</span>.onDestroy();<br><br>        <span class="hljs-comment">// Activity 销毁时注销广播接收者</span><br>        unregisterReceiver(receiver);<br>    &#125;<br><br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBroadcastReceiver</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BroadcastReceiver</span> &#123;<br><br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onReceive</span><span class="hljs-params">(Context context, Intent intent)</span> &#123;<br><br>        &#125;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<p>（2）静态注册</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">application</span>&gt;</span><br>	...<br>	<span class="hljs-tag">&lt;<span class="hljs-name">receiver</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;.MyReceiver&quot;</span></span><br><span class="hljs-tag">	    <span class="hljs-attr">android:enabled</span>=<span class="hljs-string">&quot;true&quot;</span></span><br><span class="hljs-tag">		<span class="hljs-attr">android:exported</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br>	<span class="hljs-tag">&lt;/<span class="hljs-name">receiver</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">application</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>静态注册使无论应用程序是否处于运行状态，广播接收者都会对程序进行监听</p>
<p>PS：Android 8.0 后，静态注册的广播接收者将无法接收广播</p>
<br>
<h2 id="自定义广播">自定义广播</h2>
<p>当系统提供的广播不足以满足需求时，可以自定义广播，并编写对应的广播接收者</p>
<br>
<h2 id="广播的类型">广播的类型</h2>
<p>中提供了两种广播类型，分别是无序广播和有序广播</p>
<br>
<p><strong>无序广播</strong></p>
<p>无序广播是完全异步执行的，发送广播时，所有监听这个广播的广播接收者都会接收到此广播消息</p>
<p>但接收和执行的顺序不确定。无序广播的效率较高，但无法被拦截</p>
<br>
<p><strong>有序广播</strong></p>
<p>有序广播是按照广播接收者声明的优先级别被依次接收，发送广播时，只会有一个广播接收者能够接收此消息</p>
<p>在此广播接收者中逻辑执行完毕之后，广播才会继续传递</p>
<p>相比无序广播，有序广播的广播效率较低，但此类型广播的广播接收者是有先后顺序的，并可被拦截</p>
<br>
<p>动态注册广播接收者时，可以使用 IntentFilter 对象的 setPriority() 方法设置优先级别</p>
<p>setPriority() 方法中传递的值越大，优先级越高</p>
<p>如果两个广播接收者的优先级相同，则先注册的广播接收者优先级高</p>
<p>即如果两个程序监听了同一个广播事件，同时设置了相同的优先级，则先安装的程序优先接收</p>
<br>
<h1 id="服务">服务</h1>
<p>通常在程序下载些大文件时，如果程序突然退出，此时下教文件的任务会中断</p>
<p>此时，我们可以使用 Andrid 提供的服务来下载大文件</p>
<p>服务是一个长期运行在后台的用户组件，没有用户界面。可以在后台下载文件、 还可以在后合执行很多任务</p>
<p>Service（服务）是 Android 四大组件之一，是能够在后台长时间执行操作并且不提供用户界面的应用程序组件</p>
<p>可以与其他组件进行交互，一般由 Activity 启动，但是并不依赖于Activity</p>
<p>Service 通常被称为“后台服务”，它的应用场景主要有两个，分别是后台运行和跨进程访问</p>
<br>
<p><strong>后台运行</strong></p>
<p>Android 可以在后台长时间进行操作而不用提供界面信息，只有当系统必须要回收内在资源时，才会被销毁</p>
<br>
<p><strong>跨进程访问</strong></p>
<p>当 Serice 被其他应用组件启动时，即使用户切换到其他应用程序，服务仍将在后台继续运行</p>
<br>
<h2 id="服务的创建">服务的创建</h2>
<p>跟 广播接收者 q像，只要先 new 【Service】，然后Android Studio 会自动在清单文件中注册服务</p>
<p>MyService.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Service</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyService</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> IBinder <span class="hljs-title function_">onBind</span><span class="hljs-params">(Intent intent)</span> &#123;<br>        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> Return the communication channel to the service.</span><br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnsupportedOperationException</span>(<span class="hljs-string">&quot;Not yet implemented&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<p>AndroidManifest.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">service</span></span><br><span class="hljs-tag">	<span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;.MyService&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:enabled</span>=<span class="hljs-string">&quot;true&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:exported</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span><br></code></pre></td></tr></table></figure>
<br>
<h2 id="服务的生命周期">服务的生命周期</h2>
<p>服务的生命周期与启动方式有关，一种是 startService() 方法，一种是 bindService() 方法</p>
<p><img src="https://gitee.com/Greedy_firtree/picture/raw/master/blog/436C81EC83753E03FA2244FDCFA112A4.jpg" srcset="/img/loading.gif" lazyload alt="img"></p>
<br>
<ul>
<li>onCreate()：第一次创建服务时执行的方法</li>
<li>onStartCommand()：调用 startService() 方法启动服务时执行的方法</li>
<li>onBind()：调用 bindService() 方法启动服务时执行的方法</li>
<li>onUnbind()：调用unBindService() 方法断开服务绑定时执行的方法</li>
<li>onDestory()：服务被销毁时执行的方法</li>
</ul>
<p>如果想要停止通过 startService() 方法启动的服务，只需调用 stopService() 方法即可</p>
<p>如果想要停止通过 bindService() 方法启动的服务，需要调用 unbindService() 方法解绑</p>
<br>
<h2 id="服务的启动方式">服务的启动方式</h2>
<p><strong>通过 startService() 方法：</strong></p>
<p>在程序中通过调用 startService() 方法启动的服务会长期在后台运行，并且启动服务的组件与服务之间没有关联</p>
<p>即使启动服务的组件被销毁，服务依旧会运行</p>
<br>
<br>
<p><strong>通过 BindService() 方法</strong></p>
<p>当一个组件通过调用 binService() 方法启动服务时，服务会与组件绑定，程序允许组件与服务交互。组件一旦退出或者调用 unbindService() 方法解绑服务，服务就会被销毁。多个组件可以绑定一个服务</p>
<p><code>BindService(Intent service, ServiceConnection conn, int flag)</code></p>
<br>
<ul>
<li>service：用于指定要启动的 Service</li>
<li>conn：用于监听调用者（服务绑定的组件）与 Service 之间的连接状态
<ul>
<li>连接成功时，程序回调onServiceConnected ( ComponentName name, IBinder service) 方法</li>
<li>断开连接时，程序回调 onServiceDisconnected ( ComponentName name )方法</li>
</ul>
</li>
<li>flags：表示组件绑定服务时是否自动创建Service
<ul>
<li>参数为0，表示不自动创建</li>
<li>参数为 “BIND AUTO_ CREATE&quot;，表示自动创建</li>
</ul>
</li>
</ul>
<br>
<h2 id="服务的通信">服务的通信</h2>
<p>有两种，本地服务通信是指应用程序内部的通信，远程服务通信是指两个应用程序之间的通信</p>
<p>使用这两种方式进行通信时，必须保证服务以绑定方式开启，否则无法进行通信和数据交换</p>
<br>
<h1 id="网络编程">网络编程</h1>
<h2 id="通过-http-访问网络">通过 HTTP 访问网络</h2>
<p>Android 对 HTTP 通信提供支持，通过标准的 Java 类 HttpURLConnection 便可实现基于 URL 的请求及响应功能。HttpURLConnection 继承自 URLConnection 类，它可以发送和接收任何类型和长度的数据，也可以设置网络请求的方式和超时时间</p>
<br>
<p><strong>使用 HttpURLConnection 访问网络</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 在 URL 的构造方法中传入要访问的资源路径</span><br><span class="hljs-type">URL</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(<span class="hljs-string">&quot;Http://www.itcast.cn&quot;</span>);<br><span class="hljs-type">HttpURLConnection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> (HttpURLConnection)url.openConnection();<br><br><span class="hljs-comment">// 设置请求方式</span><br>conn.setRequestMethod(<span class="hljs-string">&quot;GET&quot;</span>);<br><br><span class="hljs-comment">// 设置超时时间</span><br>conn.setConnectTimeout(<span class="hljs-number">5000</span>);<br><br><span class="hljs-comment">// 获取服务器返回的输入流</span><br><span class="hljs-type">InputStream</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> conn.getInputStream();<br><br><span class="hljs-comment">// 关闭 http 链接</span><br>conn.disconnect();<br></code></pre></td></tr></table></figure>
<p>在使用 HttpURLConnection 访问网络时，通常有两种网络请求方式，“GET” 和 “POST”</p>
<br>
<p><strong>GET 方式提交数据</strong></p>
<p>以实体的方式得到由请求 URL 指向的资源信息，他向服务器提交的参数跟在请求 URL 后面</p>
<p>所以通过这种方式访问的内容一般要小于 1k</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Http://localhost:8080/web/LoginServlet?username=&quot;</span><br>                 + URLEncoder.encode(<span class="hljs-string">&quot;zhangsan&quot;</span>)<br>                 + <span class="hljs-string">&quot;&amp;password=&quot;</span> + URLEncoder.encode(<span class="hljs-string">&quot;123&quot;</span>);<br><br><span class="hljs-type">URL</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(path);<br><span class="hljs-type">HttpURLConnection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> (HttpURLConnection)url.openConnection();<br><br>conn.setRequestMethod(<span class="hljs-string">&quot;GET&quot;</span>);<br>conn.setConnectTimeout(<span class="hljs-number">5000</span>);<br><br><span class="hljs-comment">// 获取状态码</span><br><span class="hljs-type">int</span> <span class="hljs-variable">responseCode</span> <span class="hljs-operator">=</span> conn.getResponseCode();<br><br><br><span class="hljs-comment">// 访问码为200表示访问成功</span><br><span class="hljs-keyword">if</span> (responseCode == <span class="hljs-number">200</span>) &#123;<br>    <span class="hljs-type">InputStream</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> conn.getInputStream();<br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<p><strong>POST 方式提交</strong></p>
<p>提交时，数据以键值对的形式封装在请求实体中，用户通过浏览器无法看到，比较安全</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Http://localhost:8080/web/LoginServlet&quot;</span>;<br><span class="hljs-type">URL</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(path);<br><span class="hljs-type">HttpURLConnection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> (HttpURLConnection)url.openConnection();<br>conn.setConnectTimeout(<span class="hljs-number">5000</span>);<br>conn.setRequestMethod(<span class="hljs-string">&quot;POST&quot;</span>);<br><br><span class="hljs-comment">// 封装要提交的数据</span><br><span class="hljs-type">String</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;username=&quot;</span> + URLEncoder.encode(<span class="hljs-string">&quot;Zhangsan&quot;</span>)<br>    		+ <span class="hljs-string">&quot;&amp;password=&quot;</span> + URLEncoder.encode(<span class="hljs-string">&quot;123&quot;</span>);<br><br><span class="hljs-comment">// 指定提交的数据的类型</span><br>conn.setRequestProperty(<span class="hljs-string">&quot;content-Type&quot;</span>, <span class="hljs-string">&quot;application/x-www-from-urlencoded&quot;</span>);<br><br><span class="hljs-comment">// 指定提交的数据的长度</span><br>conn.setRequestProperty(<span class="hljs-string">&quot;content-Length&quot;</span>, data.length() + <span class="hljs-string">&quot;&quot;</span>);<br><br><span class="hljs-comment">// 设置允许向外写数据</span><br>conn.setDoOutput(<span class="hljs-literal">true</span>);<br><br><span class="hljs-comment">// 利用输出流将数据写给服务器</span><br><span class="hljs-type">OutputStream</span> <span class="hljs-variable">os</span> <span class="hljs-operator">=</span> conn.getOutputStream();<br>os.write(data.getBytes());<br><br><span class="hljs-comment">// 获取状态码</span><br><span class="hljs-type">int</span> <span class="hljs-variable">code</span> <span class="hljs-operator">=</span> conn.getResponseCode();<br><br><span class="hljs-keyword">if</span> (code == <span class="hljs-number">200</span>) &#123;<br>    <span class="hljs-type">InputStream</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> conn.getInputStream();<br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<h2 id="使用-webview-控件">使用 WebView 控件</h2>
<p><strong>浏览网页：</strong></p>
<p>Android 默认提供内置浏览器，可以使用 WebView 来实现，可以在 xml 文件中通过 <wenview> 标签来实现，也可以在 java 文件中 new</wenview></p>
<table>
<thead>
<tr>
<th>方法名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>loadUrl(String url)</td>
<td>加载指定 URL 对应的页面</td>
</tr>
<tr>
<td>loadData(String data, String mimeType, String encoding)</td>
<td>将指定的字符串加载到浏览器中</td>
</tr>
<tr>
<td>loadDataWithBaseURL(String baseUel, String data, String mimeType, String encoding, String historyUrl)</td>
<td>基于 URL 加载指定的数据</td>
</tr>
<tr>
<td>capturePicture()</td>
<td>创建当前屏幕的快照</td>
</tr>
<tr>
<td>goBack()</td>
<td>执行后退操作</td>
</tr>
<tr>
<td>goForward()</td>
<td>执行前进操作</td>
</tr>
<tr>
<td>stopLoading()</td>
<td>停止加载当前的页面</td>
</tr>
<tr>
<td>reload()</td>
<td>刷新当前页面</td>
</tr>
</tbody>
</table>
<br>
<br>
<p><strong>执行 HTML 代码</strong></p>
<p>WebView 类提供了 loadData() 和 loadDataWithBaseURL() 方法加载 HTML代码</p>
<p>当使用loadData() 方法来加载带中文的HTML代码时会产生乱码，但是 loadDataWithBaseURL() 方法不会</p>
<p>loadDataWithBaseURL()</p>
<p><code>loadDataWithBaseURL(String baseUrl, String data, String mimeType, String encoding, String historyUrl)</code></p>
<ul>
<li>baseUrl：用于指定当前页使用的基本URL。如果为 null, 则使用默认的 about:blank</li>
<li>data：用于指定要显示的字符串数据</li>
<li>mimeType：用于指定要显示内容的MIME类型。如果为null，则默认使用 text / html</li>
<li>encoding：用于指定数据的编码方式</li>
<li>historyUrl: 用于指定当前页的历史URL</li>
</ul>
<br>
<br>
<p><strong>支持 JavaScript 代码</strong></p>
<p>首先获取 WebView 控件的 WebSettings 对象，然后调用该对象的 setJavaScriptEnabled() 方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vaja">WebSettings settings = webView.getSettings();<br>settings.setJvaScriptEnabled(true);<br></code></pre></td></tr></table></figure>
<br>
<p>此时对于大部分的 JavaScrip 代码都可以加载出来。但是对于使用 window.alert() 方法弹出的提示框却加载不出来。可以通过 WenView 控件的 setWebChromeClient() 方法实现</p>
<p><code>webview.setWebChromeClient(new WebChromeClient());</code></p>
<br>
<h2 id="json">JSON</h2>
<p>是一种新的数据格式，表示一种轻量级的数据交互格式，不能直接显示到程序的界面上，而是要将数据解析为一个集合或对象的形式。有两种表示结构，分别是对象结构和数组结构。</p>
<br>
<p><strong>对象结构</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">&#123;<br>	key1:value1,<br>	key2:value2,<br>	...<br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<p><strong>数组结构</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">[<br>	value1,<br>	value2,<br>	...<br>]<br></code></pre></td></tr></table></figure>
<br>
<h3 id="json-解析">JSON 解析</h3>
<p>假设我们有两条 JSON 数据，json1 是对象结构，json2 是数组结构</p>
<br>
<p><strong>1. 使用 JSONObject 类和 JSONArray 类解析</strong></p>
<p>（1）使用 JSONObject 类解析对象结构的数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">JSONObject</span> <span class="hljs-variable">jsobObj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>(json1);<br><span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> jsonObj.optString(<span class="hljs-string">&quot;name&quot;</span>);<br><span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> jsonObj.optInt(<span class="hljs-string">&quot;age&quot;</span>);<br><span class="hljs-type">boolean</span> <span class="hljs-variable">married</span> <span class="hljs-operator">=</span> jsonObj.optBoolean(<span class="hljs-string">&quot;married&quot;</span>);<br></code></pre></td></tr></table></figure>
<br>
<p>（2）使用 JSONArray 类解析数组结构的数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">JSONArray</span> <span class="hljs-variable">jsonArray</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONArray</span>(json2);<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; jsonArray.length(); i++) &#123;<br>	<span class="hljs-type">JSONObject</span> <span class="hljs-variable">jsobObj</span> <span class="hljs-operator">=</span> jsonArray.getJSONObject(i);<br>	<span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> jsonObj.optString(<span class="hljs-string">&quot;name&quot;</span>);<br>	<span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> jsonObj.optInt(<span class="hljs-string">&quot;age&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<br>
<p><strong>2. 使用 Gson 类解析</strong></p>
<p>通过 Gson 库的 fronJson() 方法来解析 JSON 数据，在使用 Gson 库前必须创建 JSON 数据对应的实体类，实体类中的成员名称必须和 JSON 数据中的 key 一致</p>
<br>
<p>（1）利用 Gson 库解析对象结构的数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br><span class="hljs-type">Person1</span>  <span class="hljs-variable">person1</span> <span class="hljs-operator">=</span> gson.fronJson(json1, Person1.class);<br></code></pre></td></tr></table></figure>
<br>
<p>（2）利用 Gson 库解析数组结构的数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br><span class="hljs-type">Type</span> <span class="hljs-variable">ListType</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeToken</span>&lt;List&lt;Person2&gt;&gt;()&#123;&#125;.getType();<br>List&lt;Person2&gt; person2 = gson.fronJson(json2, listType); <br></code></pre></td></tr></table></figure>
<br>
<h2 id="handler-消息机制">Handler 消息机制</h2>
<p>Handler 是一种异步回调机制，主要负责与子线程进行通信，主要包括四个关键对象</p>
<ul>
<li>Message：在线程之间传递的消息</li>
<li>Handler：处理者，主要负责 Message 的发送以及处理</li>
<li>MessageQueue：消息队列，存放 Handler 发送过来的消息，按照先入先出的规则执行</li>
<li>Looper：不断的从消息队列中抽取消息并传递到 Handler 对象的 handleMessage() 方法中</li>
</ul>
<br>
<h1 id="图形图像处理">图形图像处理</h1>
<h2 id="常见的绘图类">常见的绘图类</h2>
<p>Android 中常见的绘图类有  Bitmap 、BitmapFactory、Paint、Canvas 类</p>
<p>可以分别实现创建位图、将指定资源解析为位图、创建画笔、绘制画布等功能</p>
<br>
<h3 id="bitmap">Bitmap</h3>
<p>用来创建位图，位图就是由图片元素的单个点组成，有像素、长、宽、颜色等描述信息</p>
<table>
<thead>
<tr>
<th>方法名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>createBitmap(int width, int height, Config config)</td>
<td>创建位图，width 表示要创建的图片的宽度，height 表示高度，config表示图片的配置信息</td>
</tr>
<tr>
<td>createBitmap(int colors[], int offset, int stride, int width, int height, Config config)</td>
<td>使用颜色数组创建一个指定宽高的位图，颜色数组的个数为 width * height</td>
</tr>
<tr>
<td>createBitmap(Bitmap src)</td>
<td>使用源位图创建一个新的位图</td>
</tr>
<tr>
<td>createBitmap(Bitmap source, int x, int y, int width, int height)</td>
<td>从源位图的指定坐标开始剪切一个指定宽高的图像，用于创建新的位图</td>
</tr>
<tr>
<td>createBitmap(Bitmap source, int x，int y, int width, int height, Matrix m, boolean filter)</td>
<td>按照 Matrix 规则从源位图的指定坐标开始剪切一个指定宽高的图像</td>
</tr>
</tbody>
</table>
<p>创建一个 Bitmap 类的对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">Bitmap.<span class="hljs-type">Config</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> Bitmap.Config.ARGB_8888;<br><span class="hljs-type">Bitmap</span> <span class="hljs-variable">bitmip</span> <span class="hljs-operator">=</span> Bitmap.createBitmap(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, config);<br></code></pre></td></tr></table></figure>
<br>
<h3 id="bitmapfactory-类">BitmapFactory 类</h3>
<p>BitmapFactory 表示位图工厂，主要用于从不同的数据源中解析、创建 Bitmap 对象</p>
<table>
<thead>
<tr>
<th>方法名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>decodeFile(String pathName)</td>
<td>将指定路径的文件解码为位图</td>
</tr>
<tr>
<td>decodeStream(InputStream is)</td>
<td>将指定输入流解码为位图</td>
</tr>
<tr>
<td>decodeResource(Resources res, int id)</td>
<td>将给定的资源 id 解析为位图</td>
</tr>
</tbody>
</table>
<p>eg. 要把drawable 文件夹中的 icon.png 图片解码为位图</p>
<p><code>Bitmap bitmap = BitmapFactory.decodeResource(this.getResources(), R.drawable.icon);</code></p>
<br>
<h3 id="paint-类">Paint 类</h3>
<p>表示画笔，主要用于描述图形的颜色和风格，如线宽、颜色、透明度和填充效果等</p>
<table>
<thead>
<tr>
<th>方法名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>setARGB(int a, int r, int g, int b)</td>
<td>设置颜色</td>
</tr>
<tr>
<td>setColor(int color)</td>
<td>设置颜色</td>
</tr>
<tr>
<td>setAlpha(int a)</td>
<td>设置透明度</td>
</tr>
<tr>
<td>setAntiAlias(boolean aa)</td>
<td>画笔是否使用抗锯齿功能</td>
</tr>
<tr>
<td>setTextAlign(Align align)</td>
<td>设置绘制文本时的文本对齐方式，参数值为 Align.CENTER、Align.LEFT、Align.RIGHT</td>
</tr>
<tr>
<td>setTextSize(float textSize)</td>
<td>设置绘制文本时的文字大小</td>
</tr>
<tr>
<td>setFakeBoldText(boolean fakeBoldText)</td>
<td>设置绘制文字是否为粗体</td>
</tr>
<tr>
<td>setDither(boolean dither)</td>
<td>指定是否使用图像抖动处理</td>
</tr>
<tr>
<td>setShadowLayer(float radius, float dx, float dy, int color)</td>
<td>设置阴影</td>
</tr>
<tr>
<td>setXfermode(Xfermode xfermode)</td>
<td>设置图像的混合模式</td>
</tr>
</tbody>
</table>
<p>eg. 设置一个画笔，颜色为红色</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Paint</span> <span class="hljs-variable">paint</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Paint</span>();<br>paint.setColor(Color.RED);<br></code></pre></td></tr></table></figure>
<br>
<h3 id="canvas-类">Canvas 类</h3>
<p>代表画布，可以绘制各种图形</p>
<table>
<thead>
<tr>
<th>方法名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>drawRect(Rect r, Paint paint)</td>
<td>使用画笔绘制矩形</td>
</tr>
<tr>
<td>drawOval(RectF oval, Paint paint)</td>
<td>使用画笔绘制椭圆形</td>
</tr>
<tr>
<td>drawCircle(float cx, float cy, float radius, Paint paint)</td>
<td>使用画笔绘制圆形</td>
</tr>
<tr>
<td>drawLine(float startX, float startY, float stopX, float stopY,  Paint paint)</td>
<td>使用画笔在指定位置画线</td>
</tr>
<tr>
<td>drawRoundRect(RectF rect, float rx, float ry, Paint paint)</td>
<td>使用画笔绘制圆角矩形</td>
</tr>
</tbody>
</table>
<br>
<h2 id="为图像添加特效">为图像添加特效</h2>
<p>Matrix 类本身不能对图像进行修改，但是他可以与其他 API 结合来控制图形图像的变换</p>
<table>
<thead>
<tr>
<th>特效</th>
<th>方法名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>平移</td>
<td>setTranslate(float dx, float dy)</td>
<td>指定图像在x、y轴平移 dx、dy</td>
</tr>
<tr>
<td></td>
<td>proTranslate(float dx, float dy)</td>
<td>使用前乘的方式计算在x、y轴移动的距离</td>
</tr>
<tr>
<td></td>
<td>postTranslate(float dx, float dy)</td>
<td>使用后乘的方式计算在x、y轴移动的距离</td>
</tr>
<tr>
<td>旋转</td>
<td>setRotate(float degrees)</td>
<td>指定图像旋转 degrees 度</td>
</tr>
<tr>
<td></td>
<td>preRotate(float degrees)</td>
<td>使用前乘的方式指定图像旋转 degrees 度</td>
</tr>
<tr>
<td></td>
<td>postRotate(float degrees, float px, float py)</td>
<td>使用后乘的方式以 px 和 py 为轴心旋转 degrees 度</td>
</tr>
<tr>
<td>缩放</td>
<td>setScale(float sx, float sy)</td>
<td>指定图像在x、y轴的缩放比例为 sx 和 xy</td>
</tr>
<tr>
<td></td>
<td>preScale(float sx, float sy)</td>
<td>使用前乘的方式计算缩放比</td>
</tr>
<tr>
<td></td>
<td>postScale(float sx, float sy)</td>
<td>使用后乘的方式计算缩放比</td>
</tr>
<tr>
<td>倾斜</td>
<td>setSkew(float kx, float ky)</td>
<td>指定图像在x、y轴的倾斜值</td>
</tr>
<tr>
<td></td>
<td>preSkew(float kx, float ky)</td>
<td>使用前乘的方式计算倾斜值</td>
</tr>
<tr>
<td></td>
<td>postSkew(float kx, float ky)</td>
<td>使用后乘的方式计算倾斜值</td>
</tr>
</tbody>
</table>
<br>
<h2 id="动画">动画</h2>
<p>Android 提供了三种动画模式：补间动画、逐帧动画、属性动画</p>
<br>
<h3 id="补间动画">补间动画</h3>
<p>通过对 View 进行一系列的动画操作实现，有四种类型</p>
<br>
<p><strong>1. 透明度渐变动画</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">set</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">alpha</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:interpolator</span>=<span class="hljs-string">&quot;@android:anim/linear_interpolator&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:repeatMode</span>=<span class="hljs-string">&quot;reverse&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:repeatCount</span>=<span class="hljs-string">&quot;infinite&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:duration</span>=<span class="hljs-string">&quot;1000&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:fromAlpha</span>=<span class="hljs-string">&quot;1.0&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:toAlpha</span>=<span class="hljs-string">&quot;0.0&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span><br></code></pre></td></tr></table></figure>
<ul>
<li>interpolator：控制动画的变化速度</li>
<li>repeatMode：指定动画重复的方式</li>
<li>repeatCount：动画重复次数</li>
<li>duration：动画播放时长</li>
<li>fromAlpha / toAlpha：动画开始和结束时的透明度</li>
</ul>
<br>
<p><strong>2. 旋转动画</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">set</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rotate</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:fromDegrees</span>=<span class="hljs-string">&quot;0&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:toDegrees</span>=<span class="hljs-string">&quot;360&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:pivotX</span>=<span class="hljs-string">&quot;50%&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:pivotY</span>=<span class="hljs-string">&quot;50%&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:repeatMode</span>=<span class="hljs-string">&quot;reverse&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:repeatCount</span>=<span class="hljs-string">&quot;infinite&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:duration</span>=<span class="hljs-string">&quot;1000&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span><br></code></pre></td></tr></table></figure>
<ul>
<li>fromDegrees / toDegrees：开始和结束时的角度</li>
<li>pivotX / pivotY：旋转点的坐标</li>
</ul>
<br>
<p><strong>3. 缩放动画</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">set</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">scale</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:fromXScale</span>=<span class="hljs-string">&quot;1.0&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:fromYScale</span>=<span class="hljs-string">&quot;1.0&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:toXScale</span>=<span class="hljs-string">&quot;0.5&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:toYScale</span>=<span class="hljs-string">&quot;0.5&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:pivotY</span>=<span class="hljs-string">&quot;50%&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:pivotX</span>=<span class="hljs-string">&quot;50%&quot;</span></span><br><span class="hljs-tag"></span><br><span class="hljs-tag"></span><br><span class="hljs-tag">        <span class="hljs-attr">android:repeatMode</span>=<span class="hljs-string">&quot;reverse&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:repeatCount</span>=<span class="hljs-string">&quot;infinite&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:duration</span>=<span class="hljs-string">&quot;3000&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span><br></code></pre></td></tr></table></figure>
<ul>
<li>fromXScale / fromYScale：开始时x、y轴上的缩放系数</li>
<li>toXScale / toYScale：结束时x、y轴上的缩放系数</li>
<li>pivotX  / pivotY：缩放点的坐标</li>
</ul>
<br>
<p><strong>4. 平移动画</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">set</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">translate</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:fromXDelta</span>=<span class="hljs-string">&quot;0.0&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:fromYDelta</span>=<span class="hljs-string">&quot;0.0&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:toXDelta</span>=<span class="hljs-string">&quot;100.0&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:toYDelta</span>=<span class="hljs-string">&quot;0.0&quot;</span></span><br><span class="hljs-tag"></span><br><span class="hljs-tag">        <span class="hljs-attr">android:repeatMode</span>=<span class="hljs-string">&quot;reverse&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:repeatCount</span>=<span class="hljs-string">&quot;infinite&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:duration</span>=<span class="hljs-string">&quot;4000&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span><br></code></pre></td></tr></table></figure>
<ul>
<li>fromXDelta / fromYDelta：开始时的坐标</li>
<li>toXDelta / toYDelta：结束时的坐标</li>
</ul>
<br>
<br>
<p>补间动画也可以在java代码中编写</p>
<p>分别使用 AlphaAnimation、RotateAnimation、ScaleAnimation、TranslateAnimation 类来实现上述四种动画效果</p>
<br>
<h2 id="逐帧动画">逐帧动画</h2>
<p>是按照提前准备好的惊涛图像按顺序播放，产生动画效果</p>
<p>使用时，先在 res/drawable 中创建逐帧动画的 xml 文件，并在该文件的 item 标签中通过设置 <code>android:drawable</code> 与 <code>android:duration</code> 指定需要的图片和显示时间</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">animation-list</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">android:drawable</span>=<span class="hljs-string">&quot;@drawable/wifi01&quot;</span> <span class="hljs-attr">android:duration</span>=<span class="hljs-string">&quot;300&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">android:drawable</span>=<span class="hljs-string">&quot;@drawable/wifi02&quot;</span> <span class="hljs-attr">android:duration</span>=<span class="hljs-string">&quot;300&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">animation-list</span>&gt;</span><br></code></pre></td></tr></table></figure>
<br>
<p>也可以通过 AnimationDrawable 类在 Java 代码中定义逐帧动画</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> &#123;<br>        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);<br>        setContentView(R.layout.activity_main);<br><br>        <span class="hljs-type">ImageView</span> <span class="hljs-variable">imageView</span> <span class="hljs-operator">=</span> (ImageView) findViewById(R.id.iv);<br>        <span class="hljs-type">AnimationDrawable</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnimationDrawable</span>();<br><br>        a.addFrame(getResources().getDrawable(R.drawable.img_1), <span class="hljs-number">200</span>);<br>        a.addFrame(getResources().getDrawable(R.drawable.img_2), <span class="hljs-number">200</span>);<br><br>        imageView.setBackground(a);<br>        a.setOneShot(<span class="hljs-literal">false</span>);    <span class="hljs-comment">// 循环播放</span><br>        a.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<h2 id="属性动画">属性动画</h2>
<p>一种对属性值不断进行操作的模式</p>
<p>具体不会</p>
<h1 id="多媒体应用开发">多媒体应用开发</h1>
<h2 id="音频播放">音频播放</h2>
<h3 id="mediaplayer">MediaPlayer</h3>
<table>
<thead>
<tr>
<th>方法名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>setDataSource()</td>
<td>设置要播放的音频位置</td>
</tr>
<tr>
<td>prepare()</td>
<td>在开始播放器的准备工作</td>
</tr>
<tr>
<td>start()</td>
<td>开始或继续播放音频</td>
</tr>
<tr>
<td>pause()</td>
<td>暂停播放音频</td>
</tr>
<tr>
<td>reset()</td>
<td>重置</td>
</tr>
<tr>
<td>seekTo()</td>
<td>从指定位置开始播放音频</td>
</tr>
<tr>
<td>stop()</td>
<td>停止播放音频且无法再次播放</td>
</tr>
<tr>
<td>release()</td>
<td>释放资源</td>
</tr>
<tr>
<td>isPlaying()</td>
<td>判断当前是否在播放音频</td>
</tr>
<tr>
<td>getDuration()</td>
<td>获取载入音频的时长</td>
</tr>
</tbody>
</table>
<br>
<p><strong>1. 实例化 MediaPlayer 类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">MediaPlayer</span> <span class="hljs-variable">mediaPlayer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MediaPlayer</span>();<br>mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);<br></code></pre></td></tr></table></figure>
<p>setAudioStreamType() 的参数表示音频类型</p>
<ul>
<li>AudioManager.STREAM_MUSIC：音乐</li>
<li>AudioManager.STREAM_RING：响铃</li>
<li>AudioManager.STREAM_ALARM：闹钟</li>
<li>AudioManager.STREAM_NOTEIFICATION：提示音</li>
</ul>
<br>
<p><strong>2. 设置数据源</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 设置播放应用自带的音频</span><br>mediaPlayer = MediaPlayer.create(MainActivity.<span class="hljs-built_in">this</span>, R.raw.xxx);<br><br><span class="hljs-comment">// 设置播放 SD 卡中的音频</span><br>mediaPlayer.setDataSource(<span class="hljs-string">&quot;SD卡中的音频文件路径&quot;</span>);<br><br><span class="hljs-comment">// 设置播放网络音频文件</span><br>mediaPlayer.setDataSource(<span class="hljs-string">&quot;http://www.xxx.mp3&quot;</span>);<br></code></pre></td></tr></table></figure>
<p>设置播放网络音频文件时要在清单文件中添加网络访问权限</p>
<p><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;</code></p>
<br>
<p><strong>3. 播放音频文件</strong></p>
<p>（1）小音频文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">mediaPlayer.prepare();<br>mediaPlayer.start();<br></code></pre></td></tr></table></figure>
<p>（2）大音频文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java">mediaPlayer.prepareAsync();<br>mediaPlayer.setOnPreparedListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MediaPlayer</span>.OnPreparedListener() &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPrepared</span><span class="hljs-params">(MediaPlayer mediaPlayer)</span> &#123;<br>        mediaPlayer.start();<br>    &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>
<br>
<p><strong>4. 暂停播放</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (mediaPlayer != <span class="hljs-literal">null</span> &amp;&amp; mediaPlayer.isPlaying()) &#123;<br>    mediaPlayer.pause();<br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<p><strong>5. 重新播放</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 播放状态下重播</span><br><span class="hljs-keyword">if</span> (mediaPlayer != <span class="hljs-literal">null</span> &amp;&amp; mediaPlayer.isPlaying()) &#123;<br>    mediaPlayer.seekTo(<span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">return</span>;<br>&#125;<br><br><span class="hljs-comment">// 暂停状态下重播</span><br><span class="hljs-keyword">if</span> (mediaPlayer != <span class="hljs-literal">null</span>) &#123;<br>    mediaPlayer.seekTo(<span class="hljs-number">0</span>);<br>    mediaPlayer.start();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>seekTo() 用于定位播放，如果参数为0，表示从头播放</p>
<br>
<p><strong>6. 停止播放</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (mediaPlayer != <span class="hljs-literal">null</span> &amp;&amp; mediaPlayer.isPlaying()) &#123;<br>    mediaPlayer.stop();<br>    mediaPlayer.release();<br>    mediaPlayer = <span class="hljs-literal">null</span><br>&#125;<br></code></pre></td></tr></table></figure>
<br>
<h3 id="soundpool">SoundPool</h3>
<p>音频池，可以同时播放多个短小的音频</p>
<table>
<thead>
<tr>
<th>方法名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>load()</td>
<td>加载音频文件</td>
</tr>
<tr>
<td>play()</td>
<td>播放音频</td>
</tr>
<tr>
<td>pause(int streamID)</td>
<td>根据id，暂停播放</td>
</tr>
<tr>
<td>resume(int streamID)</td>
<td>根据id，继续播放</td>
</tr>
<tr>
<td>stop(int streamID)</td>
<td>根据id，停止播放</td>
</tr>
<tr>
<td>unload(int SoundID)</td>
<td>卸载id为 soundID 的音频</td>
</tr>
<tr>
<td>release()</td>
<td>释放资源</td>
</tr>
</tbody>
</table>
<br>
<p><strong>1. 创建 SoundPool 类</strong></p>
<p><code>public SoundPool (int maxStreams, int streamType, int srcQuality)</code></p>
<ul>
<li>maxStreams：最多音频数</li>
<li>streamType：音频类型</li>
<li>srcQuality：音频质量，默认 0</li>
</ul>
<br>
<p><strong>2. 加载音频文件</strong></p>
<p>调用 load() 方法来加载</p>
<table>
<thead>
<tr>
<th>方法名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>public int load(Context context, int resId, int priority)</td>
<td>通过指定的资源id加载音频文件，resId表示指定的资源id，priority 表示播放声音的优先级</td>
</tr>
<tr>
<td>public int load(String path, int priority )</td>
<td>通过音频文件的路径加载音频，path表示音频文件的路径</td>
</tr>
<tr>
<td>public int load(AssetFileDescriptor afd, int priority)</td>
<td>在 AssetFileDescriptor 所对应的文件中加载音频</td>
</tr>
<tr>
<td>public int load ( FileDescriptor fd, long offset, long length, int priority )</td>
<td>加载 FileDescriptor对 象中从 ofiet 开始长度为 length 的音频</td>
</tr>
</tbody>
</table>
<br>
<p><strong>3. 播放音频</strong></p>
<p><code>play(int soundID, float leftVolume, floatrightVolume, int priority, int loop, float rate)</code></p>
<ul>
<li>soundID：要播放的音频id，该音频是通过load() 方法返回的音频</li>
<li>leftVolume：左声道的音量，取值范围为 0.0~1.0</li>
<li>rightVolume：右声道的音量，取值范围为 0.0~1.0</li>
<li>priorty：播放音频的优先级，数值越大，优先级越高</li>
<li>loop：循环播放的次数，0表示不循环，-1表示循环</li>
<li>rate：播放速率，1 表示正常播放速率，0.5 表示最低播放速率，2表示最高播放速率</li>
</ul>
<br>
<h2 id="视频播放">视频播放</h2>
<h3 id="videoview">VideoView</h3>
<table>
<thead>
<tr>
<th>方法名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>setVideoPath()</td>
<td>设置要播放的视频文件的位置</td>
</tr>
<tr>
<td>start()</td>
<td>开始或继续播放视频</td>
</tr>
<tr>
<td>pause()</td>
<td>暂停播放视频</td>
</tr>
<tr>
<td>resume()</td>
<td>重播</td>
</tr>
<tr>
<td>seekTo()</td>
<td>从指定位置开始播放视频</td>
</tr>
<tr>
<td>isPlaying()</td>
<td>判断当前是否正在播放视频</td>
</tr>
<tr>
<td>grtDuration()</td>
<td>获取载入的视频时长</td>
</tr>
</tbody>
</table>
<br>
<p><strong>1. 在布局文件中添加 VideoView 控件</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">VideoView</span></span><br><span class="hljs-tag">	<span class="hljs-attr">android:id</span>=<span class="hljs-string">&quot;@+id/videoview&quot;</span></span><br><span class="hljs-tag">	<span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;match_parent&quot;</span></span><br><span class="hljs-tag">	<span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;match_parent&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure>
<br>
<p><strong>2. 视频的播放</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">VideoView</span> <span class="hljs-variable">videoView</span> <span class="hljs-operator">=</span> (VideoView) findViewById(R.id.videoview);<br><span class="hljs-comment">// 播放本地视频</span><br>videoView.setVideoPath(<span class="hljs-string">&quot;...&quot;</span>);<br><br><span class="hljs-comment">// 播放网络视频</span><br>videoView.setVideoURI(Uri.parse(<span class="hljs-string">&quot;http://www.xxx.avi&quot;</span>));<br></code></pre></td></tr></table></figure>
<p>设置播放网络视频文件时要在清单文件中添加网络访问权限</p>
<p><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;</code></p>
<br>
<p><strong>3. 为 VideoView 添加控制器</strong></p>
<p>使用 VideoView 播放视频时，可以通过 setMediaController() 添加一个媒体控制器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">MediaController</span> <span class="hljs-variable">controller</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MediaController</span>(context);<br>videoView.setMediaController(controller);<br></code></pre></td></tr></table></figure>
 <br>
<h3 id="mediaplayer-surfaceview">MediaPlayer / SurfaceView</h3>
<p>将 MediaPlayer 和 SurfaceView 结合使用。MediaPlayer播放视频，SurfaceView 显示图像</p>
<p>可以避免因画图任务繁重而造成主线程阻塞，从而提高程序的性能</p>
<br>
<p><strong>1. 在布局中添加 SurfaceView 控件</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">SurfaceView</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:id</span>=<span class="hljs-string">&quot;@+id/surfaceview&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;fill_parent&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;fill_parent&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure>
<br>
<p><strong>2. 获取界面控件并设置类型</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">SurfaceView</span> <span class="hljs-variable">surfaceView</span> <span class="hljs-operator">=</span> (SurfaceView) findViewById(R.id.surfaceview);<br><span class="hljs-type">SurfaceHolder</span> <span class="hljs-variable">holder</span> <span class="hljs-operator">=</span> surfaceView.getHolder();<br>holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);<br></code></pre></td></tr></table></figure>
<br>
<p><strong>3. 回调 addCallback() 方法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java">holder.addCallback(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SurfaceHolder</span>.Callback() &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">surfaceCreated</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> SurfaceHolder surfaceHolder)</span> &#123;<br>        Log.i(<span class="hljs-string">&quot;TAG&quot;</span>, <span class="hljs-string">&quot;surface创建好了&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">surfaceChanged</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> SurfaceHolder surfaceHolder, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> i1, <span class="hljs-type">int</span> i2)</span> &#123;<br>        Log.i(<span class="hljs-string">&quot;TAG&quot;</span>, <span class="hljs-string">&quot;surface的大小发生变化&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">surfaceDestroyed</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> SurfaceHolder surfaceHolder)</span> &#123;<br>        Log.i(<span class="hljs-string">&quot;TAG&quot;</span>, <span class="hljs-string">&quot;surface被销毁了&quot;</span>);<br>    &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>
<br>
<p><strong>4. 播放视频</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">MediaPlayer</span> <span class="hljs-variable">mediaPlayer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MediaPlayer</span>();<br>mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);<br><br>mediaPlayer.setDataSource(<span class="hljs-string">&quot;视频资源路径&quot;</span>);<br><br><span class="hljs-comment">// SurfaceView 与 MediaPlayer 进行关联</span><br>mediaPlayer.setDisplay(holder);<br><br><span class="hljs-comment">// 将视频文件解析到内存之中</span><br>mediaPlayer.prepareAsync();<br>mediaPlayer.start();<br></code></pre></td></tr></table></figure>
<br>
</font>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="category-chain-item">学习笔记</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Android/">#Android</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>【笔记】Android移动开发</div>
      <div>http://example.com/post/23934e5f.html</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>firtree</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年6月9日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/post/c24675b4.html" title="【笔记】MySQL">
                        <span class="hidden-mobile">【笔记】MySQL</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
